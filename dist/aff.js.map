{"version":3,"sources":["webpack:///webpack/bootstrap d2e0ab94e790a4967d30","webpack:///./index.js","webpack:///./dom.js","webpack:///./equality.js","webpack:///./object.js","webpack:///./state.js","webpack:///./tags.js"],"names":["dom","state","tags","module","exports","t","e","patch","make_patcher","node_cache","new_node","node","pop","Node","tag","id","style","class","children","attributes","events","text","innerHTML","element","push","selector","classes","parts","match","i","l","length","part","charAt","substring","cls","join","properties","key","test","Array","isArray","set_children","child","document","createTextNode","createElement","className","appendChild","toElement","value","undefined","setAttribute","element_set_listener","bind","element_events","next_element_serial","ev_type","fn","serial","__element_serial","event_set","addEventListener","substr","ev","args","thunk","Thunk","name","func","slice","arg1","set_selector","set_properties","last_element","last_node","last_thunk","getNode","parentNode","insertBefore","removeChild","recycle","nodeValue","removeAttribute","common_length","Math","min","child_elements","childNodes","firstChild","initial_element","node_constructor","apply","equal","a","b","type_a","type_b","keys_a","Object","keys","keys_b","object_add_tag","object_has_tag","obj","defineProperty","__proto__","update","make_updater","make_debug_updater","copy_update","$inc","op_inc","$dec","op_dec","$any","predict_any","path","op","apply_op","after","before","console","log","JSON","parse","stringify","copy_apply_op","index","new_obj","all_frozen","freeze","k","helpers","reduce","toUpperCase"],"mappings":"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","file":"./dist/aff.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap d2e0ab94e790a4967d30","import * as dom from './dom'\nimport * as state from './state'\nimport * as tags from './tags'\n\nmodule.exports = {\n  dom: dom,\n  state: state,\n  tags: tags,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./index.js","import {equal} from './equality'\n\n// Node object cache\nlet node_cache = [];\n\nfunction new_node() {\n  // try fetch from cache\n  let node = node_cache.pop();\n  if (node) {\n    return node;\n  }\n  return new Node();\n}\n\nclass Node {\n  constructor() {\n    this.tag = null;\n    this.id = null;\n    this.style = null;\n    this.class = null;\n    this.children = null;\n    this.attributes = null;\n    this.events = null;\n    this.text = null;\n    this.innerHTML = null;\n    this.element = null;\n  }\n\n  recycle() {\n    this.tag = null;\n    this.id = null;\n    this.style = null;\n    this.class = null;\n    this.children = null;\n    this.attributes = null;\n    this.events = null;\n    this.text = null;\n    this.innerHTML = null;\n    this.element = null;\n    node_cache.push(this);\n  }\n\n  set_selector(selector) {\n    let classes = [];\n    let parts = selector.match(/[.#][A-Za-z][A-Za-z0-9_:-]*/g);\n    for (let i = 0, l = parts.length; i < l; i++) {\n      let part = parts[i];\n      if (part.charAt(0) == '#') {\n        this.id = part.substring(1);\n      } else if (part.charAt(0) == '.') {\n        classes.push(part.substring(1));\n      }\n    }\n    let cls = classes.join(' ');\n    if (cls.length > 0) {\n      this.class = cls;\n    }\n  }\n\n  set_properties(properties) {\n    for (let key in properties) {\n      if (key == 'id' || key == 'class' || key == 'innerHTML') {\n        // id, class, innerHTML\n        this[key] = properties[key];\n      } else if (key == 'style') {\n        // styles\n        this.style = properties.style;\n      } else if (/^on/.test(key) && typeof properties[key] === 'function') {\n        // events\n        this.events = this.events || {};\n        this.events[key] = properties[key];\n      } else {\n        // attributes\n        this.attributes = this.attributes || {};\n        this.attributes[key] = properties[key];\n      }\n    }\n  }\n\n  set_children(children) {\n    this.children = this.children || [];\n    if (Array.isArray(children)) {\n      // flatten\n      for (let i = 0, l = children.length; i < l; i++) {\n        this.set_children(children[i]);\n      }\n    } else if (typeof children === 'string' || typeof children === 'number') {\n      let child = new_node();\n      child.text = children;\n      this.children.push(child);\n    } else {\n      this.children.push(children);\n    }\n  }\n\n  toElement() {\n    let element;\n    if (this.text !== null) {\n      element = document.createTextNode(this.text);\n    } else {\n      element = document.createElement(this.tag);\n    }\n    if (this.innerHTML !== null) {\n      element.innerHTML = this.innerHTML;\n    }\n    if (this.id !== null) {\n      element.id = this.id;\n    }\n    if (this.style !== null) {\n      for (let key in this.style) {\n        element.style[key] = this.style[key];\n      }\n    }\n    if (this.class !== null) {\n      element.className = this.class;\n    }\n    if (this.children !== null) {\n      for (let i = 0, l = this.children.length; i < l; i++) {\n        element.appendChild(this.children[i].toElement());\n      }\n    }\n    if (this.attributes !== null) {\n      for (let key in this.attributes) {\n        let value = this.attributes[key];\n        if (value !== undefined && value !== null) {\n          element.setAttribute(key, value);\n        }\n      }\n    }\n    if (this.events !== null) {\n      for (let key in this.events) {\n        // set event callback, bind current Node to callback\n        // constructor must not be arrow function to get proper 'this'\n        element_set_listener(element, key, this.events[key].bind(this));\n      }\n    }\n    this.element = element;\n    return element;\n  }\n\n}\n\nlet element_events = {};\nlet element_set_listener = (() => {\n  let next_element_serial = 1;\n  return function(element, ev_type, fn) {\n    let serial = element.__element_serial;\n    if (!serial) {\n      serial = next_element_serial;\n      next_element_serial++;\n      element.__element_serial = serial;\n    }\n    let event_set = element_events[serial];\n    if (!event_set) {\n      event_set = {};\n      element_events[serial] = event_set;\n    }\n    if (!(ev_type in event_set)) {\n      element.addEventListener(ev_type.substr(2), function(ev) {\n        return element_events[serial][ev_type](ev);\n      });\n    }\n    event_set[ev_type] = fn;\n  }\n})();\n\n// thunk helper\nexport function t(...args) {\n  if (args.length === 0) {\n    throw['no arguments to t()'];\n  }\n\n  let thunk = new Thunk();\n\n  switch (typeof args[0]) {\n  case 'string': // named thunk\n    thunk.name = args[0];\n    thunk.func = args[1];\n    thunk.args = args.slice(2);\n    break\n\n  case 'function':\n    thunk.func = args[0];\n    thunk.args = args.slice(1);\n    thunk.name = thunk.func.name;\n    break\n  }\n\n  return thunk\n}\n\n// element helper\nexport function e(...args) {\n  if (args.length === 0) {\n    throw['no arguments to e()'];\n  }\n\n  // Thunk\n  if (typeof args[0] === 'function') {\n    let thunk = new Thunk();\n    thunk.func = args[0];\n    thunk.args = args.slice(1);\n    // set thunk name from function, may be undefined\n    thunk.name = thunk.func.name; \n    return thunk;\n  }\n\n  let node = new_node();\n\n  let arg1;\n\n  switch (args.length) {\n  case 1:\n    // tag only, eg. e('hr')\n    node.tag = args[0];\n\n    break\n\n  case 2:\n    // two args, first the tag, second a selector or children or properties\n    // eg. e('div', '#main .block')\n    // or e('div', 'Hello, world')\n    // or e('div', [ e('p', 'Hello, world') ])\n    // or e('div', { id: 'main' })\n    node.tag = args[0];\n    arg1 = args[1];\n\n    switch (typeof arg1) {\n    case 'string':\n      if (arg1[0] == '#' || arg1[0] == '.') { // selector\n        node.set_selector(arg1);\n      } else { // text node\n        node.set_children(arg1);\n      }\n      break\n\n    case 'number':\n      node.set_children(arg1);\n      break\n\n    case 'object':\n      if (Array.isArray(arg1)) { // children\n        node.set_children(arg1);\n      } else { // properties\n        node.set_properties(arg1);\n      }\n      break\n\n    default:\n      throw['bad argument at index 1 to e()', args];\n      break\n    }\n\n    break\n\n  case 3:\n    // three args, first the tag, second a selector or properties, third children\n    // eg. e('div', '#main', [ e('p', 'Hello') ])\n    // or e('div', { id: 'main' }, [])\n    node.tag = args[0];\n    node.set_children(args[2]);\n    arg1 = args[1];\n\n    switch (typeof arg1) {\n    case 'string':\n      node.set_selector(arg1);\n      break\n\n    case 'object':\n      node.set_properties(arg1);\n      break\n\n    default:\n      throw['bad argument at index 1 to e()', args];\n      break\n    }\n\n    break\n\n  case 4:\n    // four arguments. first tag, second selector, third properties, forth children\n    // eg e('div', '#main', { class: 'foo' }, [ e('div') ])\n    node.tag = args[0];\n    node.set_selector(args[1]);\n    node.set_properties(args[2]);\n    node.set_children(args[3]);\n\n    break\n\n  default:\n    throw['bad arguments to e()', args];\n    break\n  }\n\n  return node;\n}\n\n// patch last_element to represent node attributes, with diffing last_node\nexport function patch(last_element, node, last_node) {\n  // thunk\n  let last_thunk;\n  if (last_node && last_node instanceof Thunk) {\n    last_thunk = last_node;\n    last_node = last_thunk.node;\n  }\n  if (node instanceof Thunk) {\n    let thunk = node;\n    // check last_thunk\n    if (last_thunk) {\n      // same construct function\n      if (thunk.name == last_thunk.name) { \n        // check args\n        if (equal(thunk.args, last_thunk.args)) { // reusable\n          // reuse node\n          thunk.node = last_thunk.node;\n          // reuse element\n          thunk.element = last_thunk.element;\n        }\n      }\n    } \n    // get node of thunk\n    node = thunk.getNode();\n  }\n\n  // no need to patch if two Nodes is the same object\n  // if thunk's node is reuse, will return here\n  if (node === last_node) {\n    return [last_element, node];\n  }\n\n  // not patchable, build a new element\n  if (\n    // not diffable\n    (!last_node)\n    // different tag, no way to patch\n    || (node.tag != last_node.tag)\n  ) {\n    let element = node.toElement();\n    // insert new then remove old\n    last_element.parentNode.insertBefore(element, last_element);\n    last_element.parentNode.removeChild(last_element);\n\n    // recycle Node object\n    if (last_node) {\n      last_node.recycle();\n    }\n\n    return [element, node];\n  }\n\n  // innerHTML\n  if (node.innerHTML != last_node.innerHTML) {\n    last_element.innerHTML = node.innerHTML;\n  }\n\n  // text\n  if (node.text != last_node.text) {\n    last_element.nodeValue = node.text;\n  }\n\n  // id\n  if (node.id != last_node.id) {\n    last_element.id = node.id;\n  }\n\n  // styles\n  if (node.style && last_node.style) {\n    // common styles\n    for (let key in node.style) {\n      if (node.style[key] != last_node.style[key]) {\n        last_element.style[key] = node.style[key];\n      }\n    }\n    // delete styles exist in old Node but not in new\n    for (let key in last_node.style) {\n      if (!(key in node.style)) {\n        last_element.style[key] = null;\n      }\n    }\n  } else if (node.style) {\n    // new Node only\n    for (let key in node.style) {\n      last_element.style[key] = node.style[key];\n    }\n  } else if (last_node.style) {\n    // no style in new Node, delete all\n    for (let key in last_node.style) {\n      last_element.style[key] = null;\n    }\n  }\n\n  // class\n  if (node.class != last_node.class) {\n    last_element.className = node.class;\n  }\n\n  // attributes\n  if (node.attributes && last_node.attributes) {\n    // update common attributes\n    for (let key in node.attributes) {\n      if (node.attributes[key] != last_node.attributes[key]) {\n        let value = node.attributes[key];\n        if (value !== undefined && value !== null) {\n          last_element.setAttribute(key, value);\n        }\n      }\n    }\n    // delete non-exist attributes\n    for (let key in last_node.attributes) {\n      if (!(key in node.attributes)) {\n        last_element.removeAttribute(key);\n      }\n    }\n  } else if (node.attributes) {\n    // set new attributes only\n    for (let key in node.attributes) {\n      let value = node.attributes[key];\n      if (value !== undefined && value !== null) {\n        last_element.setAttribute(key, value);\n      }\n    }\n  } else if (last_node.attributes) {\n    // no attributes in new Node, delete all\n    for (let key in last_node.attributes) {\n      last_element.removeAttribute(key);\n    }\n  }\n  \n  // events\n  // not implementing global event proxy\n  if (node.events && last_node.events) {\n    for (let key in node.events) {\n      // set events, bind current node to callback function\n      // to enable referencing current node\n      element_set_listener(last_element, key, node.events[key].bind(node));\n    }\n    let serial = last_element.__element_serial;\n    for (let key in element_events[serial]) {\n      if (!(key in node.events)) {\n        element_events[serial][key] = false;\n      }\n    }\n  } else if (node.events) {\n    for (let key in node.events) {\n      // set events, bind current node to callback function\n      element_set_listener(last_element, key, node.events[key].bind(node));\n    }\n  } else if (last_node.events) {\n    let serial = last_element.__element_serial;\n    for (let key in element_events[serial]) {\n      element_events[serial][key] = false;\n    }\n  }\n\n  // children\n  if (node.children && last_node.children) {\n    // patch common amount of children\n    let common_length = Math.min(node.children.length, last_node.children.length);\n    let child_elements = last_element.childNodes;\n    for (let i = 0; i < common_length; i++) {\n      // recursive patch\n      patch(child_elements[i], node.children[i], last_node.children[i]);\n    }\n    // insert new children\n    for (let i = common_length, l = node.children.length; i < l; i++) {\n      last_element.appendChild(node.children[i].toElement());\n    }\n    // delete\n    for (let i = common_length, l = last_node.children.length; i < l; i++) {\n      last_element.removeChild(last_element.childNodes[common_length]);\n    }\n  } else if (node.children) {\n    // insert only\n    for (let i = 0, l = node.children.length; i < l; i++) {\n      last_element.appendChild(node.children[i].toElement());\n    }\n  } else if (last_node.children) {\n    // delete only\n    while (last_element.firstChild) {\n      last_element.removeChild(last_element.firstChild);\n    }\n  }\n\n  // recycle Node object\n  last_node.recycle();\n\n  return [last_element, node];\n}\n\nexport function make_patcher(initial_element, node_constructor) {\n  let element = initial_element;\n  let node;\n  return function() {\n    [element, node] = patch(\n      element,\n      node_constructor(),\n      node,\n    );\n  }\n}\n\nclass Thunk {\n  constructor() {\n    this.func = null;\n    this.args = null;\n    this.node = null;\n    this.element = null;\n    this.name = null;\n  }\n\n  toElement() {\n    if (!this.element) {\n      this.element = this.getNode().toElement();\n    }\n    return this.element;\n  }\n\n  getNode() {\n    if (!this.node) {\n      this.node = this.func.apply(undefined, this.args);\n    }\n    return this.node;\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./dom.js","import {object_has_tag} from './object'\n\nexport function equal(a, b) {\n  let type_a = typeof a;\n  let type_b = typeof b;\n  if (type_a !== type_b) {\n    return false;\n  }\n  if (type_a === 'undefined') {\n    return true;\n  } else if (type_a === 'object') {\n    // frozen objects, compare by reference\n    if (object_has_tag(a, 'frozen') && object_has_tag(b, 'frozen')) {\n      return a === b;\n    }\n    let keys_a = Object.keys(a);\n    let keys_b = Object.keys(b);\n    if (keys_a.length != keys_b.length) {\n      return false;\n    }\n    for (let key in a) {\n      if (!equal(a[key], b[key])) {\n        return false;\n      }\n    }\n    return true;\n  } else {\n    return a === b;\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./equality.js","export function object_add_tag(obj, tag) {\n  Object.defineProperty(obj, '__tag_' + tag, {\n    __proto__: null,\n    value: true,\n  });\n}\n\nexport function object_has_tag(obj, tag) {\n  return obj['__tag_' + tag] === true;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./object.js","import {object_add_tag, object_has_tag} from './object'\n\n// operations and predictions\n\nexport let $inc = { op_inc: true };\nexport let $dec = { op_dec: true };\nexport let $any = { predict_any: true };\n\n// update\n\nexport function update(obj, ...args) {\n  if (args.length == 2) { \n    // the last path node\n    let [path, op] = args;\n    if (path === $any) {\n      // match all path nodes\n      for (let key in obj) {\n        apply_op(obj, key, op);\n      }\n    } else {\n      // match one path node\n      apply_op(obj, path, op);\n    }\n  } else if (args.length > 2) { \n    // path finding\n    let path = args[0];\n    if (path === $any) {\n      for (let key in obj) {\n        update(obj[key], ...args.slice(1));\n      }\n    } else {\n      update(obj[path], ...args.slice(1));\n    }\n  } else {\n    throw['bad path and op to update()', args];\n  }\n  return obj\n}\n\nfunction apply_op(obj, key, op) {\n  if (op === $inc) {\n    // self increment\n    obj[key]++;\n  } else if (op === $dec) {\n    // self decrement\n    obj[key]--;\n  } else {\n    // default to set\n    obj[key] = op;\n  }\n}\n\nexport function make_updater(obj, after, before) {\n  return function(...args) {\n    before && before();\n    update(obj, ...args);\n    after && after();\n  }\n}\n\nexport function make_debug_updater(obj, after, before) {\n  return function(...args) {\n    console.log('%c BEFORE %o', 'background: #666; color: white', \n      JSON.parse(JSON.stringify(state)));\n    console.log('%c CHANGE %o', 'background: #888; color: white',\n      args);\n    before && before();\n    update(obj, ...args);\n    after && after();\n    console.log('%c AFTER  %o', 'background: #AAA; color: white',\n      JSON.parse(JSON.stringify(state)));\n  }\n}\n\n// path-copying update\n\nexport function copy_update(obj, ...args) {\n  if (args.length == 0) {\n    // no update\n    return obj;\n  } else if (args.length == 1) {\n    // single op\n    return copy_apply_op(obj, args[0]);\n  } else {\n    if (Array.isArray(obj)) { \n      // copy update array\n      let index = args[0];\n      let new_obj = [];\n      let all_frozen = true;\n      if (index === $any) {\n        // update all indexes\n        for (let i = 0; i < obj.length; i++) {\n          new_obj.push(copy_update(obj[i], ...args.slice(1)));\n          if (typeof obj[i] === 'object' && !object_has_tag(obj[i], 'frozen')) {\n            all_frozen = false;\n          }\n        }\n      } else {\n        // only one index\n        for (let i = 0; i < obj.length; i++) {\n          if (i == index) {\n            new_obj.push(copy_update(obj[i], ...args.slice(1)));\n          } else {\n            new_obj.push(obj[i]);\n          }\n          if (typeof obj[i] === 'object' && !object_has_tag(obj[i], 'frozen')) {\n            all_frozen = false;\n          }\n        }\n      }\n      if (all_frozen) {\n        object_add_tag(new_obj, 'frozen');\n        Object.freeze(new_obj);\n      }\n      return new_obj;\n    } else {\n      // copy update object\n      let key = args[0];\n      let new_obj = {};\n      let all_frozen = true;\n      if (key === $any) {\n        // update all keys\n        for (let k in obj) {\n          new_obj[k] = copy_update(obj[k], ...args.slice(1));\n          if (typeof obj[k] === 'object' && !object_has_tag(obj[k], 'frozen')) {\n            all_frozen = false;\n          }\n        }\n      } else {\n        // update single key\n        for (let k in obj) {\n          if (k === key) {\n            new_obj[k] = copy_update(obj[k], ...args.slice(1));\n          } else {\n            new_obj[k] = obj[k];\n          }\n          if (typeof obj[k] === 'object' && !object_has_tag(obj[k], 'frozen')) {\n            all_frozen = false;\n          }\n        }\n      }\n      if (all_frozen) {\n        object_add_tag(new_obj, 'frozen');\n        Object.freeze(new_obj);\n      }\n      return new_obj;\n    }\n  }\n}\n\nfunction copy_apply_op(obj, op) {\n  if (op === $inc) {\n    return obj + 1;\n  } else if (op === $dec) {\n    return obj - 1;\n  } else {\n    // default to return op\n    return op;\n  }\n} \n\n\n\n// WEBPACK FOOTER //\n// ./state.js","import {e} from './dom'\n\nlet helpers = [\n  'a', 'abbr', 'acronym', 'address', 'applet', 'area', 'article', 'aside', 'audio',\n  'b', 'base', 'basefont', 'bdi', 'bdo', 'bgsound', 'big', 'blink', 'blockquote', 'body', 'br', 'button',\n  'canvas', 'caption', 'center', 'cite', 'code', 'col', 'colgroup', 'command', 'content',\n  'data', 'datalist', 'dd', 'del', 'details', 'dfn', 'dialog', 'dir', 'div', 'dl', 'dt',\n  'element', 'em', 'embed',\n  'fieldset', 'figcaption', 'figure', 'font', 'footer', 'form', 'frame', 'frameset',\n  'head', 'header', 'hgroup', 'hr', 'html',\n  'i', 'iframe', 'image', 'img', 'input', 'ins', 'isindex',\n  'kbd', 'keygen',\n  'label', 'legend', 'li', 'link', 'listing',\n  'main', 'map', 'mark', 'marquee', 'menu', 'menuitem', 'meta', 'meter', 'multicol',\n  'nav', 'nobr', 'noembed', 'noframes', 'noscript',\n  'object', 'ol', 'optgroup', 'option', 'output',\n  'p', 'param', 'picture', 'plaintext', 'pre', 'progress',\n  'q',\n  'rp', 'rt', 'rtc', 'ruby',\n  's', 'samp', 'script', 'section', 'select', 'shadow', 'small', 'source', 'spacer', 'span', 'strike', 'strong', 'style', 'sub', 'summary', 'sup',\n  'table', 'tbody', 'td', 'template', 'textarea', 'tfoot', 'th', 'thead', 'time', 'title', 'tr', 'track', 'tt',\n  'u', 'ul',\n  'var', 'video',\n  'wbr',\n  'xmp',\n].reduce((helpers, tag) => {\n  helpers[tag] = function(...args) {\n    return e(tag, ...args);\n  };\n  helpers[tag.charAt(0).toUpperCase() + tag.slice(1)] = helpers[tag];\n  helpers[tag.toUpperCase()] = helpers[tag];\n  return helpers;\n}, {});\n\nmodule.exports = helpers;\n\n\n\n// WEBPACK FOOTER //\n// ./tags.js"],"sourceRoot":""}