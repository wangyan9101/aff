{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap e823cc515a1c022f0b32","webpack:///./index.js","webpack:///./app.js","webpack:///./state.js","webpack:///./all_tags.js","webpack:///./tagged.js","webpack:///./tags.js"],"names":["App","t","e","setBeforeThunkCallFunc","setAfterThunkCallFunc","equal","node","patching","patch_tick","dirty_tree","next_dirty_tree","updated","update_count","element_cache","i","length","init","args","arg","HTMLElement","element","node_func","state","undefined","update","beforeUpdate","update_state","afterUpdate","patch","fn","res","Array","isArray","innerHTML","path","obj","SubState","ret","__is_op","apply","setup_state_object","hasOwnProperty","key","k","slice","__aff_tick","Object","defineProperty","configurable","enumerable","writable","value","last_element","last_node","last_thunk","Thunk","thunk","should_update","name","last_arg","max_dirty_index","max_same_index","last_path","index","getNode","tag","toElement","warning","console","warn","parentNode","insertBefore","removeChild","tagName","toLowerCase","push","patch_node","text","nodeValue","id","style_type","style","last_style_type","class","className","attributes","valueType","setAttribute","removeAttribute","events","element_set_listener","bind","serial","__element_serial","element_events","children","common_length","Math","min","child_elements","childNodes","l","appendChild","firstChild","hooks","patched","forEach","app","get","subpath","func","_name","beforeThunkCallFunc","afterThunkCallFunc","display","Node","set_children","set_selector","str","set_properties","selector","classes","parts","match","part","charAt","substring","cls","join","properties","property","v","test","created","child","document","createTextNode","pop","createElement","backgroundColor","color","fontWeight","next_element_serial","ev_type","event_set","addEventListener","substr","ev","a","b","type_a","type_b","keys_a","keys","keys_b","pick","$inc","op","$dec","$merge","spec","o2","$push","elem","$reduce","accumulated","what","$del_at","acc","cur","$map","$filter","$any","__predict_any","new_obj","all_tags","Selector","$","Css","css","strings","values","helpers","reduce","toUpperCase","module","exports","none","clear"],"mappings":"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","file":"affjs.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"affjs\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"affjs\"] = factory();\n\telse\n\t\troot[\"affjs\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap e823cc515a1c022f0b32","export { \n  App, \n  t, e, \n  setBeforeThunkCallFunc, setAfterThunkCallFunc,\n} from './app';\nexport * from './state';\nexport * from './tags';\nexport * from './tagged';\n\n\n\n// WEBPACK FOOTER //\n// ./index.js","import { $any } from './state'\nimport { all_tags } from './all_tags'\nimport { Selector, Css } from './tagged'\n\nexport class App {\n  constructor(...args) {\n    this.node = null;\n    this.patching = false;\n    this.patch_tick = 1;\n    this.dirty_tree = {};\n    this.next_dirty_tree = {};\n    this.updated = false;\n    this.update_count = 0;\n    this.element_cache = {};\n    for (let i = 0; i < all_tags.length; i++) {\n      this.element_cache[all_tags[i]] = [];\n    }\n    this.init(...args);\n  }\n\n  init(...args) {\n    for (let i = 0; i < args.length; i++) {\n      let arg = args[i];\n      if (arg instanceof HTMLElement) {\n        this.element = arg;\n      } else if (typeof arg == 'function') {\n        this.node_func = arg;\n      } else {\n        this.state = arg;\n      }\n    }\n    if (this.element !== undefined && this.node_func !== undefined && this.state !== undefined) {\n      this.update();\n    }\n  }\n\n  beforeUpdate() {\n  }\n\n  afterUpdate() {\n  }\n\n  update(...args) {\n    this.beforeUpdate(this.state, ...args);\n    this.state = this.update_state(this.next_dirty_tree, this.state, ...args);\n    this.afterUpdate(this.state, ...args);\n    if (!this.element) {\n      return this.state;\n    }\n    if (!this.patching) {\n      this.patching = true;\n      this.updated = false;\n      this.update_count = 0;\n      this.patch_tick++;\n      this.dirty_tree = this.next_dirty_tree;\n      this.next_dirty_tree = {};\n      [this.element, this.node] = this.patch(this.element, this.node_func(this.state), this.node);\n      while (this.updated) {\n        if (this.update_count > 4096) { // infinite loop\n          throw['infinite loop in updating', args];\n        }\n        // if state is updated when patching, patch again\n        this.updated = false;\n        this.patch_tick++;\n        this.dirty_tree = this.next_dirty_tree;\n        this.next_dirty_tree = {};\n        [this.element, this.node] = this.patch(this.element, this.node_func(this.state), this.node);\n      }\n      this.patching = false;\n      this.update_count = 0;\n    } else {\n      // state updated when patching\n      this.updated = true;\n      this.update_count++;\n    }\n    return this.state;\n  }\n\n  tap(fn) {\n    let res = fn(this.state);\n    if (res) {\n      this.update(...(Array.isArray(res) ? res : [res]));\n    }\n  }\n\n  html() {\n    return this.element.innerHTML;\n  }\n\n  get(...args) {\n    let path = args;\n    if (path.length == 1 && Array.isArray(path[0])) {\n      path = path[0];\n    }\n    let obj = this.state;\n    for (let i = 0; i < path.length; i++) {\n      obj = obj[path[i]];\n    }\n    return obj;\n  }\n\n  sub(...args) {\n    let path = args;\n    if (path.length == 1 && Array.isArray(path[0])) {\n      path = path[0];\n    }\n    return new SubState(this, path);\n  }\n\n  update_state(dirty_tree, obj, ...args) {\n    if (args.length === 0) {\n      return obj;\n    } else if (args.length === 1) {\n      let ret;\n      if (typeof args[0] === 'object' && args[0].__is_op) {\n        ret = args[0].apply(obj, this);\n        if (ret === obj) {\n          this.setup_state_object(ret);\n        }\n      } else {\n        ret = args[0];\n      }\n      return ret;\n    } else {\n      if (!obj) {\n        obj = {};\n      }\n      if (typeof obj === 'object') {\n        if (!obj.hasOwnProperty('__aff_tick')) {\n          this.setup_state_object(obj);\n        }\n        let key = args[0];\n        for (let k in obj) {\n          if (k == key || key === $any) {\n            if (!dirty_tree[k]) {\n              dirty_tree[k] = {};\n            }\n            obj[k] = this.update_state(dirty_tree[k], obj[k], ...args.slice(1));\n          }\n        }\n        if (key !== $any && !(key in obj)) {\n          if (!dirty_tree[key]) {\n            dirty_tree[key] = {};\n          }\n          obj[key] = this.update_state(dirty_tree[key], undefined, ...args.slice(1));\n        }\n        obj.__aff_tick = this.patch_tick + 1;\n        return obj;\n      } else {\n        throw['bad update path', obj, args];\n      }\n    }\n  }\n\n  setup_state_object(obj) {\n    if (obj.hasOwnProperty('__aff_tick')) {\n      obj.__aff_tick = this.patch_tick + 1;\n      return\n    }\n    Object.defineProperty(obj, '__aff_tick', {\n      configurable: false,\n      enumerable: false,\n      writable: true,\n      value: this.patch_tick + 1,\n    });\n  }\n\n  // patch last_element to represent node attributes, with diffing last_node\n  patch(last_element, node, last_node) {\n    // thunk\n    let last_thunk;\n    if (last_node && last_node instanceof Thunk) {\n      last_thunk = last_node;\n      last_node = last_thunk.node;\n    }\n    let thunk;\n    if (node instanceof Thunk) {\n      thunk = node;\n    }\n\n    let should_update = false;\n    if (!thunk || !last_thunk) {\n      should_update = true;\n    } else if (thunk.name != last_thunk.name) {\n      should_update = true;\n    } else if (thunk.args.length != last_thunk.args.length) {\n      should_update = true;\n    } else {\n      for (let i = 0; i < thunk.args.length; i++) {\n        let arg = thunk.args[i];\n        let last_arg = last_thunk.args[i];\n        if (arg instanceof SubState && last_arg instanceof SubState) {\n          let max_dirty_index = -1;\n          let max_same_index = -1;\n          let dirty_tree = this.dirty_tree;\n          let last_path = last_arg.path;\n          for (let index = 0; index < arg.path.length; index++) {\n            if (dirty_tree && dirty_tree[arg.path[index]]) {\n              dirty_tree = dirty_tree[arg.path[index]];\n              max_dirty_index = index;\n            }\n            if (last_path[index] == arg.path[index]) {\n              max_same_index = index;\n            }\n          }\n          if (max_dirty_index == arg.path.length - 1) {\n            should_update = true;\n            break\n          }\n          if (max_same_index != arg.path.length - 1) {\n            should_update = true;\n            break\n          }\n        } else if (arg === last_arg && typeof arg === 'object' && arg.__aff_tick === this.patch_tick) {\n          should_update = true;\n          break\n        } else if (!equal(arg, last_arg)) {\n          should_update = true;\n          break\n        }\n      }\n    }\n\n    if (thunk) {\n      if (last_thunk && !should_update) {\n        // reuse node\n        thunk.node = last_thunk.node;\n        // reuse element\n        thunk.element = last_thunk.element;\n      }\n      node = thunk.getNode();\n    }\n\n    // Thunk.getNode may return another Thunk, patch recursively\n    if (node instanceof Thunk || last_node instanceof Thunk) {\n      return this.patch(last_element, node, last_node);\n    }\n\n    // no need to patch if two Nodes is the same object\n    // if thunk's node is reuse, will return here\n    if (node === last_node) {\n      return [last_element, node];\n    }\n\n    // not patchable, build a new element\n    if (\n      // not diffable\n      (!last_node)\n      // different tag, no way to patch\n      || (node.tag != last_node.tag)\n    ) {\n      let element;\n      if (!node || !node.toElement) {\n        element = warning(`RENDER ERROR: cannot render ${node}`).toElement();\n        console.warn('cannot render', node);\n      } else {\n        element = node.toElement(undefined, this);\n      }\n      // insert new then remove old\n      if (last_element.parentNode) {\n        last_element.parentNode.insertBefore(element, last_element);\n        last_element.parentNode.removeChild(last_element);\n      }\n      // cache last_element\n      if (last_node) {\n        this.element_cache[last_element.tagName.toLowerCase()].push([last_element, last_node]);\n      }\n\n      return [element, node];\n    }\n\n    return this.patch_node(last_element, node, last_node, thunk);\n  }\n\n  patch_node(last_element, node, last_node, thunk) {\n    // innerHTML\n    if (node.innerHTML != last_node.innerHTML) {\n      last_element.innerHTML = node.innerHTML;\n    }\n\n    // text\n    if (node.text != last_node.text) {\n      last_element.nodeValue = node.text;\n    }\n\n    // id\n    if (node.id != last_node.id) {\n      last_element.id = node.id;\n    }\n\n    // styles\n    let style_type = typeof node.style;\n    let last_style_type = typeof last_node.style;\n    if (style_type != last_style_type || style_type == 'string') {\n      // not diffable\n      if (style_type == 'object') {\n        // remove all existing style\n        last_element.style = null;\n        // reset\n        for (let key in node.style) {\n          last_element.style[key] = node.style[key];\n        }\n      } else {\n        // set string style\n        if (node.style != last_node.style) {\n          last_element.style = node.style;\n        }\n      }\n    } else {\n      if (node.style && last_node.style) {\n        // common styles\n        for (let key in node.style) {\n          if (node.style[key] != last_node.style[key]) {\n            last_element.style[key] = node.style[key];\n          }\n        }\n        // delete styles exist in old Node but not in new\n        if (typeof last_node.style === 'object') {\n          for (let key in last_node.style) {\n            if (!(key in node.style)) {\n              last_element.style[key] = '';\n            }\n          }\n        }\n      } else if (node.style) {\n        // new Node only\n        for (let key in node.style) {\n          last_element.style[key] = node.style[key];\n        }\n      } else if (last_node.style) {\n        // no style in new Node, delete all\n        last_element.style = undefined;\n      }\n    }\n\n    // class\n    if (node.class != last_node.class) {\n      last_element.className = node.class;\n    }\n\n    // attributes\n    if (node.attributes && last_node.attributes) {\n      // update common attributes\n      for (let key in node.attributes) {\n        if (node.attributes[key] != last_node.attributes[key]) {\n          let value = node.attributes[key];\n          let valueType = typeof value;\n          if (valueType == 'string' || valueType == 'number') {\n            last_element.setAttribute(key, value);\n            last_element[key] = value\n          } else if (valueType == 'boolean') {\n            if (value) {\n              last_element.setAttribute(key, true);\n              last_element[key] = true;\n            } else {\n              last_element.removeAttribute(key);\n              last_element[key] = false;\n            }\n          }\n        }\n      }\n      // delete non-exist attributes\n      for (let key in last_node.attributes) {\n        if (!(key in node.attributes)) {\n          last_element.removeAttribute(key);\n          last_element[key] = undefined;\n        }\n      }\n    } else if (node.attributes) {\n      // set new attributes only\n      for (let key in node.attributes) {\n        let value = node.attributes[key];\n        let valueType = typeof value;\n        if (valueType == 'string' || valueType == 'number') {\n          last_element.setAttribute(key, value);\n          last_element[key] = value;\n        } else if (valueType == 'boolean') {\n          if (value) {\n            last_element.setAttribute(key, true);\n            last_element[key] = true;\n          } else {\n            last_element.removeAttribute(key);\n            last_element[key] = false;\n          }\n        }\n      }\n    } else if (last_node.attributes) {\n      // no attributes in new Node, delete all\n      for (let key in last_node.attributes) {\n        last_element.removeAttribute(key);\n        last_element[key] = undefined;\n      }\n    }\n    \n    // events\n    // not implementing global event proxy\n    if (node.events && last_node.events) {\n      for (let key in node.events) {\n        // set events, bind current node to callback function\n        // to enable referencing current node\n        element_set_listener(last_element, key, node.events[key].bind(node));\n      }\n      let serial = last_element.__element_serial;\n      for (let key in element_events[serial]) {\n        if (!(key in node.events)) {\n          element_events[serial][key] = false;\n        }\n      }\n    } else if (node.events) {\n      for (let key in node.events) {\n        // set events, bind current node to callback function\n        element_set_listener(last_element, key, node.events[key].bind(node));\n      }\n    } else if (last_node.events) {\n      let serial = last_element.__element_serial;\n      for (let key in element_events[serial]) {\n        element_events[serial][key] = false;\n      }\n    }\n\n    // children\n    if (node.children && last_node.children) {\n      // patch common amount of children\n      let common_length = Math.min(node.children.length, last_node.children.length);\n      let child_elements = last_element.childNodes;\n      for (let i = 0; i < common_length; i++) {\n        // recursive patch\n        this.patch(child_elements[i], node.children[i], last_node.children[i]);\n      }\n      // insert new children\n      for (let i = common_length, l = node.children.length; i < l; i++) {\n        if (!node.children[i] || !node.children[i].toElement) {\n          last_element.appendChild(warning(`RENDER ERROR: cannot render ${node.children[i]}`).toElement());\n          console.warn('cannot render', node.children[i]);\n        } else {\n          last_element.appendChild(node.children[i].toElement(undefined, this));\n        }\n      }\n      // delete\n      for (let i = common_length, l = last_node.children.length; i < l; i++) {\n        last_element.removeChild(last_element.childNodes[common_length]);\n      }\n    } else if (node.children) {\n      // insert only\n      for (let i = 0, l = node.children.length; i < l; i++) {\n        if (!node.children[i] || !node.children[i].toElement) {\n          last_element.appendChild(warning(`RENDER ERROR: cannot render ${node.children[i]}`).toElement());\n          console.warn('cannot render', node.children[i]);\n        } else {\n          last_element.appendChild(node.children[i].toElement(undefined, this));\n        }\n      }\n    } else if (last_node.children) {\n      // delete only\n      while (last_element.firstChild) {\n        last_element.removeChild(last_element.firstChild);\n      }\n    }\n\n    // set element\n    node.element = last_element;\n    if (thunk) {\n      thunk.element = last_element;\n    }\n\n    if (node.hooks && node.hooks.patched) {\n      node.hooks.patched.forEach(fn => fn(last_element));\n    }\n\n    return [last_element, node];\n  }\n}\n\nclass SubState {\n  constructor(app, path) {\n    this.app = app;\n    this.path = path;\n  }\n\n  get() {\n    return this.app.get(this.path);\n  }\n\n  update(...args) {\n    return this.app.update(...this.path, ...args);\n  }\n\n  sub(...args) {\n    let subpath = args;\n    if (subpath.length == 1 && Array.isArray(subpath[0])) {\n      subpath = subpath[0];\n    }\n    return new SubState(this.app, [...this.path, ...subpath]);\n  }\n}\n\nclass Thunk {\n  constructor() {\n    this.func = null;\n    this.args = null;\n    this.node = undefined;\n    this.element = null;\n    this.name = null;\n  }\n\n  toElement(_name, app) {\n    if (!this.element) {\n      let node = this.getNode();\n      if (!node || !node.toElement) {\n        this.element = warning(`RENDER ERROR: cannot render ${node}`).toElement();\n        console.warn('cannot render', node);\n      } else {\n        this.element = node.toElement(this.name, app);\n      }\n    }\n    return this.element;\n  }\n\n  getNode() {\n    if (!this.node) {\n      beforeThunkCallFunc(this);\n      this.node = this.func.apply(this, this.args);\n      afterThunkCallFunc(this);\n      if (this.node === null) {\n        this.node = e('div', { style: { display: 'none' }});\n      }\n      if (!this.node) {\n        throw['constructor of ' + (this.name || 'anonymous') + ' returned undefined value', this];\n      }\n    }\n    return this.node;\n  }\n\n}\n\n// thunk helper\nexport function t(...args) {\n  if (args.length == 0) {\n    throw['no arguments to t()'];\n  }\n  let thunk = new Thunk();\n  switch (typeof args[0]) {\n  case 'string': // named thunk\n    thunk.name = args[0];\n    thunk.func = args[1];\n    thunk.args = args.slice(2);\n    break\n  case 'function':\n    thunk.func = args[0];\n    thunk.args = args.slice(1);\n    thunk.name = thunk.func.name;\n    break\n  }\n  return thunk\n}\n\n// element helper\nexport function e(tag, ...args) {\n  if (typeof tag !== 'string') {\n    throw['bad tag name', tag];\n  }\n  let node = new Node();\n  node.tag = tag;\n  for (let i = 0; i < args.length; i++) {\n    let arg = args[i];\n    if (arg instanceof Node || arg instanceof Thunk) {\n      node.set_children(arg);\n    } else if (arg instanceof Selector) {\n      node.set_selector(arg.str);\n    } else if (arg instanceof Css) {\n      node.set_properties({\n        style: arg.str,\n      });\n    } else if (typeof arg === 'object') {\n      if (Array.isArray(arg)) {\n        node.set_children(arg)\n      } else {\n        node.set_properties(arg);\n      }\n    } else {\n      node.set_children(arg);\n    }\n  }\n  return node;\n}\n\nlet beforeThunkCallFunc = (thunk) => {};\nlet afterThunkCallFunc = (thunk) => {};\nexport let setBeforeThunkCallFunc = (fn) => {\n  beforeThunkCallFunc = fn;\n}\nexport let setAfterThunkCallFunc = (fn) => {\n  afterThunkCallFunc = fn;\n}\n\nclass Node {\n  constructor() {\n    this.tag = null;\n    this.id = null;\n    this.style = null;\n    this.class = null;\n    this.children = null;\n    this.attributes = null;\n    this.events = null;\n    this.text = null;\n    this.innerHTML = null;\n    this.element = null;\n    this.hooks = null;\n  }\n\n  set_selector(selector) {\n    let classes = [];\n    let parts = selector.match(/[.#][A-Za-z][A-Za-z0-9_:-]*/g);\n    for (let i = 0, l = parts.length; i < l; i++) {\n      let part = parts[i];\n      if (part.charAt(0) == '#') {\n        this.id = part.substring(1);\n      } else if (part.charAt(0) == '.') {\n        classes.push(part.substring(1));\n      }\n    }\n    let cls = classes.join(' ');\n    if (cls.length > 0) {\n      this.class = cls;\n    }\n  }\n\n  set_properties(properties) {\n    for (let key in properties) {\n      if (key == 'id' || key == 'innerHTML') {\n        // id, innerHTML\n        this[key] = properties[key];\n      } else if (key == 'class') {\n        let property = properties.class;\n        if (typeof property == 'string') {\n          this.class = property;\n        } else if (typeof property == 'object') {\n          if (Array.isArray(property)) {\n            this.class = property.join(' ');\n          } else {\n            let classes = [];\n            for (let k in property) {\n              let v = property[k];\n              if (v) {\n                classes.push(k);\n              }\n            }\n            this.class = classes.join(' ');\n          }\n        } else {\n          throw['bad class', property];\n        }\n      } else if (key == 'style') {\n        // styles\n        this.style = properties.style;\n      } else if (/^on/.test(key) && typeof properties[key] === 'function') {\n        if (key == 'oncreated' || key == 'oncreate') {\n          this.hooks = this.hooks || {};\n          this.hooks.created = this.hooks.created || [];\n          this.hooks.created.push(properties[key]);\n        } else if (key == 'onpatch' || key == 'onpatched') {\n          this.hooks = this.hooks || {};\n          this.hooks.patched = this.hooks.patched || [];\n          this.hooks.patched.push(properties[key]);\n        } else {\n          // events\n          this.events = this.events || {};\n          this.events[key] = properties[key];\n        }\n      } else {\n        //if (\n        //  (this.tag == 'input' && key == 'checked' && !properties[key])\n        //  || (this.tag == 'input' && key == 'disabled' && !properties[key])\n        //  || (this.tag == 'button' && key == 'disabled' && !properties[key])\n        //) {\n        //  continue\n        //}\n        // attributes\n        this.attributes = this.attributes || {};\n        this.attributes[key] = properties[key];\n      }\n    }\n  }\n\n  set_children(children) {\n    this.children = this.children || [];\n    if (Array.isArray(children)) {\n      // flatten\n      for (let i = 0, l = children.length; i < l; i++) {\n        this.set_children(children[i]);\n      }\n    } else if (typeof children === 'string' || typeof children === 'number') {\n      let child = new Node();\n      child.text = children;\n      this.children.push(child);\n    } else {\n      this.children.push(children);\n    }\n  }\n\n  toElement(name, app) {\n    let element;\n    if (this.text !== null) {\n      element = document.createTextNode(this.text);\n    } else {\n      // use cached element\n      if (app && app.element_cache[this.tag] && app.element_cache[this.tag].length > 0) {\n        let [element, last_node] = app.element_cache[this.tag].pop();\n        return app.patch_node(element, this, last_node)[0];\n      }\n      element = document.createElement(this.tag);\n    }\n    if (this.innerHTML !== null) {\n      element.innerHTML = this.innerHTML;\n    }\n    if (this.id !== null) {\n      element.id = this.id;\n    }\n    if (this.style !== null) {\n      if (typeof this.style == 'object') {\n        for (let key in this.style) {\n          element.style[key] = this.style[key];\n        }\n      } else {\n        element.style = this.style;\n      }\n    }\n    if (this.class !== null) {\n      element.className = this.class;\n    }\n    if (this.children !== null) {\n      for (let i = 0, l = this.children.length; i < l; i++) {\n        if (!this.children[i] || !this.children[i].toElement) {\n          element.appendChild(warning(`RENDER ERROR: cannot render ${this.children[i]}`).toElement());\n          console.warn('cannot render', this.children[i]);\n        } else {\n          element.appendChild(this.children[i].toElement(undefined, app));\n        }\n      }\n    }\n    if (this.attributes !== null) {\n      for (let key in this.attributes) {\n        let value = this.attributes[key];\n        let valueType = typeof value;\n        if (valueType == 'string' || valueType == 'number') {\n          element.setAttribute(key, value);\n          element[key] = value;\n        } else if (valueType == 'boolean') {\n          if (value) {\n            element.setAttribute(key, true);\n            element[key] = true;\n          } else {\n            element.removeAttribute(key);\n            element[key] = false;\n          }\n        }\n      }\n    }\n    if (this.events !== null) {\n      for (let key in this.events) {\n        // set event callback, bind current Node to callback\n        // constructor must not be arrow function to get proper 'this'\n        element_set_listener(element, key, this.events[key].bind(this));\n      }\n    }\n    this.element = element;\n    if (this.hooks && this.hooks.created) {\n      this.hooks.created.forEach(fn => fn(element));\n    }\n    return element;\n  }\n\n}\n\nlet warning = (text) => e('div', {\n  style: {\n    backgroundColor: 'yellow',\n    color: 'red',\n    fontWeight: 'bold',\n  },\n}, text);\n\nlet element_events = {};\nlet element_set_listener = (() => {\n  let next_element_serial = 1;\n  return function(element, ev_type, fn) {\n    let serial = element.__element_serial;\n    if (!serial) {\n      serial = next_element_serial;\n      next_element_serial++;\n      element.__element_serial = serial;\n    }\n    let event_set = element_events[serial];\n    if (!event_set) {\n      event_set = {};\n      element_events[serial] = event_set;\n    }\n    if (!(ev_type in event_set)) {\n      element.addEventListener(ev_type.substr(2), function(ev) {\n        return element_events[serial][ev_type](ev);\n      });\n    }\n    event_set[ev_type] = fn;\n  }\n})();\n\nexport function equal(a, b) {\n  if (a === b) {\n    return true;\n  }\n  let type_a = typeof a;\n  let type_b = typeof b;\n  if (type_a !== type_b) {\n    return false;\n  }\n  if (type_a === 'object') {\n    if (a instanceof SubState && b instanceof SubState) {\n      return equal(a.get(), b.get());\n    }\n    // deep compare\n    let keys_a = Object.keys(a);\n    let keys_b = Object.keys(b);\n    if (keys_a.length != keys_b.length) {\n      return false;\n    }\n    for (let key in a) {\n      if (!equal(a[key], b[key])) {\n        return false;\n      }\n    }\n    return true;\n  } else if (type_a === 'function') {\n    return a.name === b.name;\n  }\n  return false;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app.js","// operations \n\nexport let $inc = {\n  __is_op: true,\n  op: 'inc',\n  apply(obj) {\n    return (obj || 0) + 1;\n  },\n};\n\nexport let $dec = {\n  __is_op: true,\n  op: 'dec',\n  apply(obj) {\n    return obj - 1;\n  }\n};\n\nexport let $merge = (spec) => ({\n  __is_op: true,\n  op: 'merge',\n  args: [spec],\n  apply(obj, app) {\n    if (Array.isArray(spec)) {\n      return app.update_state(app.dirty_tree, obj, ...spec);\n    }\n    for (let key in spec) {\n      let o2 = spec[key];\n      if (typeof o2 == 'object' && !Array.isArray(o2) && !o2.__is_op) {\n        obj = app.update_state(app.dirty_tree, obj, key, $merge(o2));\n      } else {\n        obj = app.update_state(app.dirty_tree, obj, key, o2);\n      }\n    }\n    return obj;\n  },\n});\n\nexport let $push = (elem) => ({\n  __is_op: true,\n  op: 'push',\n  args: [elem],\n  apply(obj) {\n    obj.push(elem);\n    return obj;\n  },\n});\n\nexport let $reduce = (fn, accumulated, what = 'reduce') => ({\n  __is_op: true,\n  op: what,\n  args: [fn, accumulated],\n  apply(obj) {\n    for (let key in obj) {\n      accumulated = fn(accumulated, obj[key], key);\n    }\n    return accumulated;\n  },\n});\n\nexport let $del_at = (i) => $reduce((acc, cur, index) => {\n  if (index != i) {\n    acc.push(cur);\n  }\n  return acc;\n}, [], 'del_at');\n\nexport let $map = (fn) => $reduce((acc, cur, index) => {\n  acc.push(fn(cur));\n  return acc;\n}, [], 'map');\n\nexport let $filter = (fn) => ({\n  __is_op: true,\n  op: 'filter',\n  args: [fn],\n  apply(obj) {\n    if (typeof obj == 'object') {\n      if (Array.isArray(obj)) {\n        let o2 = [];\n        for (let i = 0; i < obj.length; i++) {\n          if (fn(obj[i], i)) {\n            o2.push(obj[i]);\n          }\n        }\n        return o2;\n      } else {\n        let o2 = {};\n        for (let k in obj) {\n          if (fn(obj[k], k) === true) {\n            o2[k] = obj[k];\n          }\n        }\n        return o2;\n      }\n    } else {\n      return fn(obj);\n    }\n  },\n});\n\n// predictions\n\nexport let $any = { __predict_any: true };\n\n// utils\n\nexport function pick(obj, ...keys) {\n  if (typeof obj === 'object') {\n    if (Array.isArray(obj)) {\n      let new_obj = [];\n      for (let i = 0; i < keys.length; i++) {\n        let key = keys[i];\n        if (obj[key] !== undefined) {\n          new_obj.push(obj[key]);\n        }\n      }\n      return new_obj;\n    } else {\n      let new_obj = {};\n      for (let i = 0; i < keys.length; i++) {\n        let key = keys[i];\n        if (obj[key] !== undefined) {\n          new_obj[key] = obj[key];\n        }\n      }\n      return new_obj;\n    }\n  } else {\n    throw['not pickable', obj, keys];\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./state.js","export let all_tags = [\n\n  // html\n  'a', 'abbr', 'acronym', 'address', 'applet', 'area', 'article', 'aside', 'audio',\n  'b', 'base', 'basefont', 'bdi', 'bdo', 'bgsound', 'big', 'blink', 'blockquote', 'body', 'br', 'button',\n  'canvas', 'caption', 'center', 'cite', 'code', 'col', 'colgroup', 'command', 'content',\n  'data', 'datalist', 'dd', 'del', 'details', 'dfn', 'dialog', 'dir', 'div', 'dl', 'dt',\n  'element', 'em', 'embed',\n  'fieldset', 'figcaption', 'figure', 'font', 'footer', 'form', 'frame', 'frameset',\n  'head', 'header', 'hgroup', 'hr', 'html',\n  'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'h7',\n  'i', 'iframe', 'image', 'img', 'input', 'ins', 'isindex',\n  'kbd', 'keygen',\n  'label', 'legend', 'li', 'link', 'listing',\n  'main', 'map', 'mark', 'marquee', 'menu', 'menuitem', 'meta', 'meter', 'multicol',\n  'nav', 'nobr', 'noembed', 'noframes', 'noscript',\n  'object', 'ol', 'optgroup', 'option', 'output',\n  'p', 'param', 'picture', 'plaintext', 'pre', 'progress',\n  'q',\n  'rp', 'rt', 'rtc', 'ruby',\n  's', 'samp', 'script', 'section', 'select', 'shadow', 'small', 'source', 'spacer', 'span', 'strike', 'strong', 'style', 'sub', 'summary', 'sup',\n  'table', 'tbody', 'td', 'template', 'textarea', 'tfoot', 'th', 'thead', 'time', 'title', 'tr', 'track', 'tt',\n  'u', 'ul',\n  'var', 'video',\n  'wbr',\n  'xmp',\n\n  // svg\n  'a', 'altGlyph', 'altGlyphDef', 'altGlyphItem', 'animate', 'animateColor', 'animateMotion', 'animateTransform', 'audio',\n  'canvas', 'circle', 'clipPath', 'color-profile', 'cursor',\n  'defs', 'desc', 'discard',\n  'ellipse',\n  'feBlend', 'feColorMatrix', 'feComponentTransfer', 'feComposite', 'feConvolveMatrix', 'feDiffuseLighting', 'feDisplacementMap', 'feDistantLight',\n  'feDropShadow', 'feFlood', 'feFuncA', 'feFuncB', 'feFuncG', 'feFuncR', 'feGaussianBlur', 'feImage', 'feMerge', 'feMergeNode', 'feMorphology',\n  'feOffset', 'fePointLight', 'feSpecularLighting', 'feSpotLight', 'feTile', 'feTurbulence', 'filter',\n  'font', 'font-face', 'font-face-format', 'font-face-name', 'font-face-src', 'font-face-uri', 'foreignObject',\n  'g', 'glyph', 'glyphRef',\n  'hatch', 'hatchpath', 'hkern',\n  'iframe', 'image',\n  'line', 'linearGradient',\n  'marker', 'mask', 'mesh', 'meshgradient', 'meshpatch', 'meshrow', 'metadata', 'missing-glyph', 'mpath',\n  'path', 'pattern', 'polygon', 'polyline',\n  'radialGradient', 'rect',\n  'script', 'set', 'solidcolor', 'stop', 'style', 'svg', 'switch', 'symbol',\n  'text', 'textPath', 'title', 'tref', 'tspan',\n  'unknown', 'use',\n  'video', 'view', 'vkern',\n\n];\n\n\n\n// WEBPACK FOOTER //\n// ./all_tags.js","export function Selector(str) {\n  this.str = str;\n}\n\nexport function $(strings, ...values) {\n  let str = '';\n  for (let i = 0; i < strings.length; i++) {\n    str += strings[i];\n    if (values[i] !== undefined) {\n      str += values[i];\n    }\n  }\n  return new Selector(str);\n}\n\nexport function Css(str) {\n  this.str = str;\n}\n\nexport function css(strings, ...values) {\n  let str = '';\n  for (let i = 0; i < strings.length; i++) {\n    str += strings[i];\n    if (values[i] !== undefined) {\n      str += values[i];\n    }\n  }\n  return new Css(str);\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./tagged.js","import {e} from './app'\nimport { all_tags } from './all_tags'\n\nlet helpers = all_tags.reduce((helpers, tag) => {\n  helpers[tag] = function(...args) {\n    return e(tag, ...args);\n  };\n  helpers[tag.charAt(0).toUpperCase() + tag.slice(1)] = helpers[tag];\n  helpers[tag.toUpperCase()] = helpers[tag];\n  return helpers;\n}, {});\n\nmodule.exports = {\n  ...helpers,\n\n  none: e('div', {\n    style: {\n      display: 'none',\n    },\n  }),\n\n  clear: e('div', {\n    style: {\n      clear: 'both',\n    },\n  }),\n};\n\n\n\n// WEBPACK FOOTER //\n// ./tags.js"],"sourceRoot":""}