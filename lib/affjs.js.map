{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///affjs.js","webpack:///webpack/bootstrap 9cc0e6ba10317c9e2cf9","webpack:///./index.js","webpack:///./alias.js","webpack:///./all_tags.js","webpack:///./app.js","webpack:///./event.js","webpack:///./state.js","webpack:///./tagged.js","webpack:///./tags.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","Object","defineProperty","value","_app","enumerable","get","App","t","e","setBeforeThunkCallFunc","setAfterThunkCallFunc","_state","keys","forEach","key","_tags","_tagged","_event","_alias","Alias","path","alias","_len","arguments","length","Array","_key","all_tags","_defineProperty","obj","configurable","writable","_toConsumableArray","arr","isArray","i","arr2","from","_classCallCheck","instance","Constructor","TypeError","_len8","args","_key17","thunk","Thunk","_typeof","name","func","slice","tag","node","Node","_len9","_key18","arg","set_children","set_selector","str","set_properties","style","ev_type","fn","equal","a","b","type_a","type_b","SubState","keys_a","keys_b","undefined","Symbol","iterator","constructor","prototype","_slicedToArray","sliceIterator","_arr","_n","_d","_e","_s","_i","next","done","push","err","_createClass","defineProperties","target","props","descriptor","protoProps","staticProps","_all_tags","patching","patch_tick","dirty_tree","next_dirty_tree","updated","update_count","element_cache","init","apply","HTMLElement","element","node_func","state","setup_alias","update","_len2","_key2","beforeUpdate","concat","update_state","afterUpdate","_patch","patch","_patch2","_patch3","_patch4","res","innerHTML","_len3","_key3","_len4","_key4","_len5","_key5","ret","__is_op","setup_patch_tick","hasOwnProperty","k","__aff_tick","recursive","_this","app","set","v","last_element","last_node","last_thunk","should_update","last_arg","max_dirty_index","max_same_index","last_path","index","getNode","toElement","warning","console","warn","parentNode","insertBefore","removeChild","tagName","toLowerCase","patch_node","text","nodeValue","style_type","last_style_type","class","classList","add","remove","attributes","valueType","setAttribute","removeAttribute","events","element_set_listener","bind","serial","__element_serial","element_events","children","common_length","Math","min","child_elements","childNodes","l","appendChild","firstChild","hooks","patched","_len6","_key15","_len7","_key16","subpath","_name","beforeThunkCallFunc","afterThunkCallFunc","display","selector","parts","match","part","charAt","substring","properties","property","test","created","type","child","toString","document","createTextNode","_app$element_cache$ta","pop","_app$element_cache$ta2","createElement","className","trim","backgroundColor","color","fontWeight","next_element_serial","event_set","addEventListener","substr","ev","Event","on","pick","new_obj","$reduce","$inc","op","$dec","$merge","spec","o2","$push","elem","accumulated","what","$del_at","acc","cur","$map","$filter","$any","__predict_any","Selector","$","strings","values","Css","css","_extends","assign","source","helpers","reduce","toUpperCase","none","clear"],"mappings":"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","file":"affjs.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"affjs\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"affjs\"] = factory();\n\telse\n\t\troot[\"affjs\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"affjs\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"affjs\"] = factory();\n\telse\n\t\troot[\"affjs\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _app = __webpack_require__(3);\n\t\n\tObject.defineProperty(exports, 'App', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _app.App;\n\t  }\n\t});\n\tObject.defineProperty(exports, 't', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _app.t;\n\t  }\n\t});\n\tObject.defineProperty(exports, 'e', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _app.e;\n\t  }\n\t});\n\tObject.defineProperty(exports, 'setBeforeThunkCallFunc', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _app.setBeforeThunkCallFunc;\n\t  }\n\t});\n\tObject.defineProperty(exports, 'setAfterThunkCallFunc', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _app.setAfterThunkCallFunc;\n\t  }\n\t});\n\t\n\tvar _state = __webpack_require__(5);\n\t\n\tObject.keys(_state).forEach(function (key) {\n\t  if (key === \"default\" || key === \"__esModule\") return;\n\t  Object.defineProperty(exports, key, {\n\t    enumerable: true,\n\t    get: function get() {\n\t      return _state[key];\n\t    }\n\t  });\n\t});\n\t\n\tvar _tags = __webpack_require__(7);\n\t\n\tObject.keys(_tags).forEach(function (key) {\n\t  if (key === \"default\" || key === \"__esModule\") return;\n\t  Object.defineProperty(exports, key, {\n\t    enumerable: true,\n\t    get: function get() {\n\t      return _tags[key];\n\t    }\n\t  });\n\t});\n\t\n\tvar _tagged = __webpack_require__(6);\n\t\n\tObject.keys(_tagged).forEach(function (key) {\n\t  if (key === \"default\" || key === \"__esModule\") return;\n\t  Object.defineProperty(exports, key, {\n\t    enumerable: true,\n\t    get: function get() {\n\t      return _tagged[key];\n\t    }\n\t  });\n\t});\n\t\n\tvar _event = __webpack_require__(4);\n\t\n\tObject.keys(_event).forEach(function (key) {\n\t  if (key === \"default\" || key === \"__esModule\") return;\n\t  Object.defineProperty(exports, key, {\n\t    enumerable: true,\n\t    get: function get() {\n\t      return _event[key];\n\t    }\n\t  });\n\t});\n\t\n\tvar _alias = __webpack_require__(1);\n\t\n\tObject.keys(_alias).forEach(function (key) {\n\t  if (key === \"default\" || key === \"__esModule\") return;\n\t  Object.defineProperty(exports, key, {\n\t    enumerable: true,\n\t    get: function get() {\n\t      return _alias[key];\n\t    }\n\t  });\n\t});\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.Alias = Alias;\n\texports.alias = alias;\n\tfunction Alias(path) {\n\t  this.path = path;\n\t}\n\t\n\tfunction alias() {\n\t  for (var _len = arguments.length, path = Array(_len), _key = 0; _key < _len; _key++) {\n\t    path[_key] = arguments[_key];\n\t  }\n\t\n\t  return new Alias(path);\n\t}\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\tvar all_tags = exports.all_tags = [\n\t\n\t// html\n\t'a', 'abbr', 'acronym', 'address', 'applet', 'area', 'article', 'aside', 'audio', 'b', 'base', 'basefont', 'bdi', 'bdo', 'bgsound', 'big', 'blink', 'blockquote', 'body', 'br', 'button', 'canvas', 'caption', 'center', 'cite', 'code', 'col', 'colgroup', 'command', 'content', 'data', 'datalist', 'dd', 'del', 'details', 'dfn', 'dialog', 'dir', 'div', 'dl', 'dt', 'element', 'em', 'embed', 'fieldset', 'figcaption', 'figure', 'font', 'footer', 'form', 'frame', 'frameset', 'head', 'header', 'hgroup', 'hr', 'html', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'h7', 'i', 'iframe', 'image', 'img', 'input', 'ins', 'isindex', 'kbd', 'keygen', 'label', 'legend', 'li', 'link', 'listing', 'main', 'map', 'mark', 'marquee', 'menu', 'menuitem', 'meta', 'meter', 'multicol', 'nav', 'nobr', 'noembed', 'noframes', 'noscript', 'object', 'ol', 'optgroup', 'option', 'output', 'p', 'param', 'picture', 'plaintext', 'pre', 'progress', 'q', 'rp', 'rt', 'rtc', 'ruby', 's', 'samp', 'script', 'section', 'select', 'shadow', 'small', 'source', 'spacer', 'span', 'strike', 'strong', 'style', 'sub', 'summary', 'sup', 'table', 'tbody', 'td', 'template', 'textarea', 'tfoot', 'th', 'thead', 'time', 'title', 'tr', 'track', 'tt', 'u', 'ul', 'var', 'video', 'wbr', 'xmp',\n\t\n\t// svg\n\t'a', 'altGlyph', 'altGlyphDef', 'altGlyphItem', 'animate', 'animateColor', 'animateMotion', 'animateTransform', 'audio', 'canvas', 'circle', 'clipPath', 'color-profile', 'cursor', 'defs', 'desc', 'discard', 'ellipse', 'feBlend', 'feColorMatrix', 'feComponentTransfer', 'feComposite', 'feConvolveMatrix', 'feDiffuseLighting', 'feDisplacementMap', 'feDistantLight', 'feDropShadow', 'feFlood', 'feFuncA', 'feFuncB', 'feFuncG', 'feFuncR', 'feGaussianBlur', 'feImage', 'feMerge', 'feMergeNode', 'feMorphology', 'feOffset', 'fePointLight', 'feSpecularLighting', 'feSpotLight', 'feTile', 'feTurbulence', 'filter', 'font', 'font-face', 'font-face-format', 'font-face-name', 'font-face-src', 'font-face-uri', 'foreignObject', 'g', 'glyph', 'glyphRef', 'hatch', 'hatchpath', 'hkern', 'iframe', 'image', 'line', 'linearGradient', 'marker', 'mask', 'mesh', 'meshgradient', 'meshpatch', 'meshrow', 'metadata', 'missing-glyph', 'mpath', 'path', 'pattern', 'polygon', 'polyline', 'radialGradient', 'rect', 'script', 'set', 'solidcolor', 'stop', 'style', 'svg', 'switch', 'symbol', 'text', 'textPath', 'title', 'tref', 'tspan', 'unknown', 'use', 'video', 'view', 'vkern'];\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.setAfterThunkCallFunc = exports.setBeforeThunkCallFunc = exports.App = undefined;\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\tvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\texports.t = t;\n\texports.e = e;\n\texports.equal = equal;\n\t\n\tvar _state = __webpack_require__(5);\n\t\n\tvar _all_tags = __webpack_require__(2);\n\t\n\tvar _tagged = __webpack_require__(6);\n\t\n\tvar _event = __webpack_require__(4);\n\t\n\tvar _alias = __webpack_require__(1);\n\t\n\tfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\t\n\tfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar App = exports.App = function () {\n\t  function App() {\n\t    _classCallCheck(this, App);\n\t\n\t    this.node = null;\n\t    this.patching = false;\n\t    this.patch_tick = 1;\n\t    this.dirty_tree = {};\n\t    this.next_dirty_tree = {};\n\t    this.updated = false;\n\t    this.update_count = 0;\n\t    this.element_cache = {};\n\t    for (var i = 0; i < _all_tags.all_tags.length; i++) {\n\t      this.element_cache[_all_tags.all_tags[i]] = [];\n\t    }\n\t    this.init.apply(this, arguments);\n\t  }\n\t\n\t  _createClass(App, [{\n\t    key: 'init',\n\t    value: function init() {\n\t      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t        args[_key] = arguments[_key];\n\t      }\n\t\n\t      for (var i = 0; i < args.length; i++) {\n\t        var arg = args[i];\n\t        if (arg instanceof HTMLElement) {\n\t          this.element = arg;\n\t        } else if (typeof arg == 'function') {\n\t          this.node_func = arg;\n\t        } else {\n\t          this.state = arg;\n\t          this.setup_alias(this.state, true);\n\t        }\n\t      }\n\t      if (this.element !== undefined && this.node_func !== undefined && this.state !== undefined) {\n\t        this.update();\n\t      }\n\t    }\n\t  }, {\n\t    key: 'beforeUpdate',\n\t    value: function beforeUpdate() {}\n\t  }, {\n\t    key: 'afterUpdate',\n\t    value: function afterUpdate() {}\n\t  }, {\n\t    key: 'update',\n\t    value: function update() {\n\t      for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n\t        args[_key2] = arguments[_key2];\n\t      }\n\t\n\t      this.beforeUpdate.apply(this, [this.state].concat(args));\n\t      this.state = this.update_state.apply(this, [this.next_dirty_tree, this.state].concat(args));\n\t      this.afterUpdate.apply(this, [this.state].concat(args));\n\t      if (!this.element) {\n\t        return this.state;\n\t      }\n\t      if (!this.patching) {\n\t        this.patching = true;\n\t        this.updated = false;\n\t        this.update_count = 0;\n\t        this.patch_tick++;\n\t        this.dirty_tree = this.next_dirty_tree;\n\t        this.next_dirty_tree = {};\n\t\n\t        var _patch = this.patch(this.element, this.node_func(this.state), this.node);\n\t\n\t        var _patch2 = _slicedToArray(_patch, 2);\n\t\n\t        this.element = _patch2[0];\n\t        this.node = _patch2[1];\n\t\n\t        while (this.updated) {\n\t          if (this.update_count > 4096) {\n\t            // infinite loop\n\t            throw ['infinite loop in updating', args];\n\t          }\n\t          // if state is updated when patching, patch again\n\t          this.updated = false;\n\t          this.patch_tick++;\n\t          this.dirty_tree = this.next_dirty_tree;\n\t          this.next_dirty_tree = {};\n\t\n\t          var _patch3 = this.patch(this.element, this.node_func(this.state), this.node);\n\t\n\t          var _patch4 = _slicedToArray(_patch3, 2);\n\t\n\t          this.element = _patch4[0];\n\t          this.node = _patch4[1];\n\t        }\n\t        this.patching = false;\n\t        this.update_count = 0;\n\t      } else {\n\t        // state updated when patching\n\t        this.updated = true;\n\t        this.update_count++;\n\t      }\n\t      return this.state;\n\t    }\n\t  }, {\n\t    key: 'tap',\n\t    value: function tap(fn) {\n\t      var res = fn(this.state);\n\t      if (res) {\n\t        this.update.apply(this, _toConsumableArray(Array.isArray(res) ? res : [res]));\n\t      }\n\t    }\n\t  }, {\n\t    key: 'html',\n\t    value: function html() {\n\t      return this.element.innerHTML;\n\t    }\n\t  }, {\n\t    key: 'get',\n\t    value: function get() {\n\t      for (var _len3 = arguments.length, args = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n\t        args[_key3] = arguments[_key3];\n\t      }\n\t\n\t      var path = args;\n\t      if (path.length == 1 && Array.isArray(path[0])) {\n\t        path = path[0];\n\t      }\n\t      var obj = this.state;\n\t      for (var i = 0; i < path.length; i++) {\n\t        obj = obj[path[i]];\n\t      }\n\t      return obj;\n\t    }\n\t  }, {\n\t    key: 'sub',\n\t    value: function sub() {\n\t      for (var _len4 = arguments.length, args = Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n\t        args[_key4] = arguments[_key4];\n\t      }\n\t\n\t      var path = args;\n\t      if (path.length == 1 && Array.isArray(path[0])) {\n\t        path = path[0];\n\t      }\n\t      return new SubState(this, path);\n\t    }\n\t  }, {\n\t    key: 'update_state',\n\t    value: function update_state(dirty_tree, obj) {\n\t      for (var _len5 = arguments.length, args = Array(_len5 > 2 ? _len5 - 2 : 0), _key5 = 2; _key5 < _len5; _key5++) {\n\t        args[_key5 - 2] = arguments[_key5];\n\t      }\n\t\n\t      if (args.length === 0) {\n\t        return obj;\n\t      } else if (args.length === 1) {\n\t        var ret = void 0;\n\t        if (_typeof(args[0]) === 'object' && args[0] !== null && args[0].__is_op) {\n\t          ret = args[0].apply(obj, this);\n\t          if (ret === obj) {\n\t            this.setup_patch_tick(ret);\n\t          }\n\t        } else {\n\t          ret = args[0];\n\t        }\n\t        this.setup_alias(ret, true);\n\t        return ret;\n\t      } else {\n\t        if (!obj) {\n\t          obj = {};\n\t        }\n\t        if ((typeof obj === 'undefined' ? 'undefined' : _typeof(obj)) === 'object' && obj !== null) {\n\t          if (!obj.hasOwnProperty('__aff_tick')) {\n\t            this.setup_patch_tick(obj);\n\t          }\n\t          var key = args[0];\n\t          for (var k in obj) {\n\t            if (k == key || key === _state.$any) {\n\t              if (!dirty_tree[k]) {\n\t                dirty_tree[k] = {};\n\t              }\n\t              obj[k] = this.update_state.apply(this, [dirty_tree[k], obj[k]].concat(_toConsumableArray(args.slice(1))));\n\t            }\n\t          }\n\t          if (key !== _state.$any && !(key in obj)) {\n\t            if (!dirty_tree[key]) {\n\t              dirty_tree[key] = {};\n\t            }\n\t            obj[key] = this.update_state.apply(this, [dirty_tree[key], undefined].concat(_toConsumableArray(args.slice(1))));\n\t          }\n\t          obj.__aff_tick = this.patch_tick + 1;\n\t          this.setup_alias(obj);\n\t          return obj;\n\t        } else {\n\t          throw ['bad update path', obj, args];\n\t        }\n\t      }\n\t    }\n\t  }, {\n\t    key: 'setup_patch_tick',\n\t    value: function setup_patch_tick(obj) {\n\t      if (obj.hasOwnProperty('__aff_tick')) {\n\t        obj.__aff_tick = this.patch_tick + 1;\n\t      } else {\n\t        Object.defineProperty(obj, '__aff_tick', {\n\t          configurable: false,\n\t          enumerable: false,\n\t          writable: true,\n\t          value: this.patch_tick + 1\n\t        });\n\t      }\n\t    }\n\t  }, {\n\t    key: 'setup_alias',\n\t    value: function setup_alias(obj, recursive) {\n\t      var _this = this;\n\t\n\t      if ((typeof obj === 'undefined' ? 'undefined' : _typeof(obj)) !== 'object' || obj === null) {\n\t        return;\n\t      }\n\t      for (var key in obj) {\n\t        if (obj[key] instanceof _alias.Alias) {\n\t          (function () {\n\t            var path = obj[key].path;\n\t            var app = _this;\n\t            Object.defineProperty(obj, key, {\n\t              enumerable: true,\n\t              get: function get() {\n\t                return app.get(path);\n\t              },\n\t              set: function set(v) {\n\t                app.update.apply(app, _toConsumableArray(path).concat([v]));\n\t              }\n\t            });\n\t          })();\n\t        } else {\n\t          if (recursive) {\n\t            this.setup_alias(obj[key], true);\n\t          }\n\t        }\n\t      }\n\t    }\n\t\n\t    // patch last_element to represent node attributes, with diffing last_node\n\t\n\t  }, {\n\t    key: 'patch',\n\t    value: function patch(last_element, node, last_node) {\n\t      // thunk\n\t      var last_thunk = void 0;\n\t      if (last_node && last_node instanceof Thunk) {\n\t        last_thunk = last_node;\n\t        last_node = last_thunk.node;\n\t      }\n\t      var thunk = void 0;\n\t      if (node instanceof Thunk) {\n\t        thunk = node;\n\t      }\n\t\n\t      var should_update = false;\n\t      if (!thunk || !last_thunk) {\n\t        should_update = true;\n\t      } else if (thunk.name != last_thunk.name) {\n\t        should_update = true;\n\t      } else if (thunk.args.length != last_thunk.args.length) {\n\t        should_update = true;\n\t      } else {\n\t        for (var i = 0; i < thunk.args.length; i++) {\n\t          var arg = thunk.args[i];\n\t          var last_arg = last_thunk.args[i];\n\t          if (arg instanceof SubState && last_arg instanceof SubState) {\n\t            var max_dirty_index = -1;\n\t            var max_same_index = -1;\n\t            var dirty_tree = this.dirty_tree;\n\t            var last_path = last_arg.path;\n\t            for (var index = 0; index < arg.path.length; index++) {\n\t              if (dirty_tree && dirty_tree[arg.path[index]]) {\n\t                dirty_tree = dirty_tree[arg.path[index]];\n\t                max_dirty_index = index;\n\t              }\n\t              if (last_path[index] == arg.path[index]) {\n\t                max_same_index = index;\n\t              }\n\t            }\n\t            if (max_dirty_index == arg.path.length - 1) {\n\t              should_update = true;\n\t              break;\n\t            }\n\t            if (max_same_index != arg.path.length - 1) {\n\t              should_update = true;\n\t              break;\n\t            }\n\t          } else if (arg === last_arg && (typeof arg === 'undefined' ? 'undefined' : _typeof(arg)) === 'object' && arg !== null && arg.__aff_tick === this.patch_tick) {\n\t            should_update = true;\n\t            break;\n\t          } else if (!equal(arg, last_arg)) {\n\t            should_update = true;\n\t            break;\n\t          }\n\t        }\n\t      }\n\t\n\t      if (thunk) {\n\t        if (last_thunk && !should_update) {\n\t          // reuse node\n\t          thunk.node = last_thunk.node;\n\t          // reuse element\n\t          thunk.element = last_thunk.element;\n\t        }\n\t        node = thunk.getNode();\n\t      }\n\t\n\t      // Thunk.getNode may return another Thunk, patch recursively\n\t      if (node instanceof Thunk || last_node instanceof Thunk) {\n\t        return this.patch(last_element, node, last_node);\n\t      }\n\t\n\t      // no need to patch if two Nodes is the same object\n\t      // if thunk's node is reuse, will return here\n\t      if (node === last_node) {\n\t        return [last_element, node];\n\t      }\n\t\n\t      // not patchable, build a new element\n\t      if (\n\t      // not diffable\n\t      !last_node ||\n\t      // different tag, no way to patch\n\t      node.tag != last_node.tag) {\n\t        var element = void 0;\n\t        if (!node || !node.toElement) {\n\t          element = warning('RENDER ERROR: cannot render ' + node).toElement();\n\t          console.warn('cannot render', node);\n\t        } else {\n\t          element = node.toElement(undefined, this);\n\t        }\n\t        // insert new then remove old\n\t        if (last_element.parentNode) {\n\t          last_element.parentNode.insertBefore(element, last_element);\n\t          last_element.parentNode.removeChild(last_element);\n\t        }\n\t        // cache last_element\n\t        if (last_node) {\n\t          this.element_cache[last_element.tagName.toLowerCase()].push([last_element, last_node]);\n\t        }\n\t\n\t        return [element, node];\n\t      }\n\t\n\t      // set element\n\t      node.element = last_element;\n\t      if (thunk) {\n\t        thunk.element = last_element;\n\t      }\n\t\n\t      return this.patch_node(last_element, node, last_node);\n\t    }\n\t  }, {\n\t    key: 'patch_node',\n\t    value: function patch_node(last_element, node, last_node) {\n\t      // innerHTML\n\t      if (node.innerHTML != last_node.innerHTML) {\n\t        last_element.innerHTML = node.innerHTML;\n\t      }\n\t\n\t      // text\n\t      if (node.text != last_node.text) {\n\t        last_element.nodeValue = node.text;\n\t      }\n\t\n\t      // id\n\t      if (node.id != last_node.id) {\n\t        last_element.id = node.id;\n\t      }\n\t\n\t      // styles\n\t      var style_type = _typeof(node.style);\n\t      var last_style_type = _typeof(last_node.style);\n\t      if (style_type != last_style_type || style_type == 'string') {\n\t        // not diffable\n\t        if (style_type == 'object' && node.style !== null) {\n\t          // remove all existing style\n\t          last_element.style = null;\n\t          // reset\n\t          for (var key in node.style) {\n\t            last_element.style[key] = node.style[key];\n\t          }\n\t        } else {\n\t          // set string style\n\t          if (node.style != last_node.style) {\n\t            last_element.style = node.style;\n\t          }\n\t        }\n\t      } else {\n\t        if (node.style && last_node.style) {\n\t          // common styles\n\t          for (var _key6 in node.style) {\n\t            if (node.style[_key6] != last_node.style[_key6]) {\n\t              last_element.style[_key6] = node.style[_key6];\n\t            }\n\t          }\n\t          // delete styles exist in old Node but not in new\n\t          if (_typeof(last_node.style) === 'object' && last_node.style !== null) {\n\t            for (var _key7 in last_node.style) {\n\t              if (!(_key7 in node.style)) {\n\t                last_element.style[_key7] = '';\n\t              }\n\t            }\n\t          }\n\t        } else if (node.style) {\n\t          // new Node only\n\t          for (var _key8 in node.style) {\n\t            last_element.style[_key8] = node.style[_key8];\n\t          }\n\t        } else if (last_node.style) {\n\t          // no style in new Node, delete all\n\t          last_element.style = undefined;\n\t        }\n\t      }\n\t\n\t      // class\n\t      for (var _key9 in node.class) {\n\t        // should update\n\t        if (!last_node.class || node.class[_key9] != last_node.class[_key9]) {\n\t          if (node.class[_key9]) {\n\t            last_element.classList.add(_key9);\n\t          } else {\n\t            last_element.classList.remove(_key9);\n\t          }\n\t        }\n\t      }\n\t      for (var _key10 in last_node.class) {\n\t        if (!node.class || !(_key10 in node.class)) {\n\t          last_element.classList.remove(_key10);\n\t        }\n\t      }\n\t\n\t      // attributes\n\t      for (var _key11 in node.attributes) {\n\t        if (!last_node.attributes || node.attributes[_key11] != last_node.attributes[_key11]) {\n\t          var value = node.attributes[_key11];\n\t          var valueType = typeof value === 'undefined' ? 'undefined' : _typeof(value);\n\t          if (valueType == 'string' || valueType == 'number') {\n\t            last_element.setAttribute(_key11, value);\n\t            last_element[_key11] = value;\n\t          } else if (valueType == 'boolean') {\n\t            if (value) {\n\t              last_element.setAttribute(_key11, true);\n\t              last_element[_key11] = true;\n\t            } else {\n\t              last_element.removeAttribute(_key11);\n\t              last_element[_key11] = false;\n\t            }\n\t          }\n\t        }\n\t      }\n\t      for (var _key12 in last_node.attributes) {\n\t        if (!node.attributes || !(_key12 in node.attributes)) {\n\t          last_element.removeAttribute(_key12);\n\t          last_element[_key12] = undefined;\n\t        }\n\t      }\n\t\n\t      // events\n\t      for (var _key13 in node.events) {\n\t        element_set_listener(last_element, _key13, node.events[_key13].bind(node));\n\t      }\n\t      var serial = last_element.__element_serial;\n\t      for (var _key14 in element_events[serial]) {\n\t        if (!node.events || !(_key14 in node.events)) {\n\t          element_events[serial][_key14] = false;\n\t        }\n\t      }\n\t\n\t      // children\n\t      if (node.children && last_node.children) {\n\t        // patch common amount of children\n\t        var common_length = Math.min(node.children.length, last_node.children.length);\n\t        var child_elements = last_element.childNodes;\n\t        for (var i = 0; i < common_length; i++) {\n\t          // recursive patch\n\t          this.patch(child_elements[i], node.children[i], last_node.children[i]);\n\t        }\n\t        // insert new children\n\t        for (var _i = common_length, l = node.children.length; _i < l; _i++) {\n\t          if (!node.children[_i] || !node.children[_i].toElement) {\n\t            last_element.appendChild(warning('RENDER ERROR: cannot render ' + node.children[_i]).toElement());\n\t            console.warn('cannot render', node.children[_i]);\n\t          } else {\n\t            last_element.appendChild(node.children[_i].toElement(undefined, this));\n\t          }\n\t        }\n\t        // delete\n\t        for (var _i2 = common_length, _l = last_node.children.length; _i2 < _l; _i2++) {\n\t          last_element.removeChild(last_element.childNodes[common_length]);\n\t        }\n\t      } else if (node.children) {\n\t        // insert only\n\t        for (var _i3 = 0, _l2 = node.children.length; _i3 < _l2; _i3++) {\n\t          if (!node.children[_i3] || !node.children[_i3].toElement) {\n\t            last_element.appendChild(warning('RENDER ERROR: cannot render ' + node.children[_i3]).toElement());\n\t            console.warn('cannot render', node.children[_i3]);\n\t          } else {\n\t            last_element.appendChild(node.children[_i3].toElement(undefined, this));\n\t          }\n\t        }\n\t      } else if (last_node.children) {\n\t        // delete only\n\t        while (last_element.firstChild) {\n\t          last_element.removeChild(last_element.firstChild);\n\t        }\n\t      }\n\t\n\t      if (node.hooks && node.hooks.patched) {\n\t        node.hooks.patched.forEach(function (fn) {\n\t          return fn(last_element);\n\t        });\n\t      }\n\t\n\t      return [last_element, node];\n\t    }\n\t  }]);\n\t\n\t  return App;\n\t}();\n\t\n\tvar SubState = function () {\n\t  function SubState(app, path) {\n\t    _classCallCheck(this, SubState);\n\t\n\t    this.app = app;\n\t    this.path = path;\n\t  }\n\t\n\t  _createClass(SubState, [{\n\t    key: 'get',\n\t    value: function get() {\n\t      return this.app.get(this.path);\n\t    }\n\t  }, {\n\t    key: 'update',\n\t    value: function update() {\n\t      var _app;\n\t\n\t      for (var _len6 = arguments.length, args = Array(_len6), _key15 = 0; _key15 < _len6; _key15++) {\n\t        args[_key15] = arguments[_key15];\n\t      }\n\t\n\t      return (_app = this.app).update.apply(_app, _toConsumableArray(this.path).concat(args));\n\t    }\n\t  }, {\n\t    key: 'sub',\n\t    value: function sub() {\n\t      for (var _len7 = arguments.length, args = Array(_len7), _key16 = 0; _key16 < _len7; _key16++) {\n\t        args[_key16] = arguments[_key16];\n\t      }\n\t\n\t      var subpath = args;\n\t      if (subpath.length == 1 && Array.isArray(subpath[0])) {\n\t        subpath = subpath[0];\n\t      }\n\t      return new SubState(this.app, [].concat(_toConsumableArray(this.path), _toConsumableArray(subpath)));\n\t    }\n\t  }]);\n\t\n\t  return SubState;\n\t}();\n\t\n\tvar Thunk = function () {\n\t  function Thunk() {\n\t    _classCallCheck(this, Thunk);\n\t\n\t    this.func = null;\n\t    this.args = null;\n\t    this.node = undefined;\n\t    this.element = null;\n\t    this.name = null;\n\t  }\n\t\n\t  _createClass(Thunk, [{\n\t    key: 'toElement',\n\t    value: function toElement(_name, app) {\n\t      if (!this.element) {\n\t        var node = this.getNode();\n\t        if (!node || !node.toElement) {\n\t          this.element = warning('RENDER ERROR: cannot render ' + node).toElement();\n\t          console.warn('cannot render', node);\n\t        } else {\n\t          this.element = node.toElement(this.name, app);\n\t        }\n\t      }\n\t      return this.element;\n\t    }\n\t  }, {\n\t    key: 'getNode',\n\t    value: function getNode() {\n\t      if (!this.node) {\n\t        beforeThunkCallFunc(this);\n\t        this.node = this.func.apply(this, this.args);\n\t        afterThunkCallFunc(this);\n\t        if (this.node === null) {\n\t          this.node = e('div', { style: { display: 'none' } });\n\t        }\n\t        if (!this.node) {\n\t          throw ['constructor of ' + (this.name || 'anonymous') + ' returned undefined value', this];\n\t        }\n\t      }\n\t      return this.node;\n\t    }\n\t  }]);\n\t\n\t  return Thunk;\n\t}();\n\t\n\t// thunk helper\n\t\n\t\n\tfunction t() {\n\t  for (var _len8 = arguments.length, args = Array(_len8), _key17 = 0; _key17 < _len8; _key17++) {\n\t    args[_key17] = arguments[_key17];\n\t  }\n\t\n\t  if (args.length == 0) {\n\t    throw ['no arguments to t()'];\n\t  }\n\t  var thunk = new Thunk();\n\t  switch (_typeof(args[0])) {\n\t    case 'string':\n\t      // named thunk\n\t      thunk.name = args[0];\n\t      thunk.func = args[1];\n\t      thunk.args = args.slice(2);\n\t      break;\n\t    case 'function':\n\t      thunk.func = args[0];\n\t      thunk.args = args.slice(1);\n\t      thunk.name = thunk.func.name;\n\t      break;\n\t  }\n\t  return thunk;\n\t}\n\t\n\t// element helper\n\tfunction e(tag) {\n\t  if (typeof tag !== 'string') {\n\t    throw ['bad tag name', tag];\n\t  }\n\t  var node = new Node();\n\t  node.tag = tag;\n\t\n\t  for (var _len9 = arguments.length, args = Array(_len9 > 1 ? _len9 - 1 : 0), _key18 = 1; _key18 < _len9; _key18++) {\n\t    args[_key18 - 1] = arguments[_key18];\n\t  }\n\t\n\t  for (var i = 0; i < args.length; i++) {\n\t    var arg = args[i];\n\t    if (arg instanceof Node || arg instanceof Thunk) {\n\t      node.set_children(arg);\n\t    } else if (arg instanceof _tagged.Selector) {\n\t      node.set_selector(arg.str);\n\t    } else if (arg instanceof _tagged.Css) {\n\t      node.set_properties({\n\t        style: arg.str\n\t      });\n\t    } else if (arg instanceof _event.Event) {\n\t      node.set_properties(_defineProperty({}, 'on' + arg.ev_type, arg.fn));\n\t    } else if ((typeof arg === 'undefined' ? 'undefined' : _typeof(arg)) === 'object' && arg !== null) {\n\t      if (Array.isArray(arg)) {\n\t        node.set_children(arg);\n\t      } else {\n\t        node.set_properties(arg);\n\t      }\n\t    } else {\n\t      node.set_children(arg);\n\t    }\n\t  }\n\t  return node;\n\t}\n\t\n\tvar beforeThunkCallFunc = function beforeThunkCallFunc(thunk) {};\n\tvar afterThunkCallFunc = function afterThunkCallFunc(thunk) {};\n\tvar setBeforeThunkCallFunc = exports.setBeforeThunkCallFunc = function setBeforeThunkCallFunc(fn) {\n\t  beforeThunkCallFunc = fn;\n\t};\n\tvar setAfterThunkCallFunc = exports.setAfterThunkCallFunc = function setAfterThunkCallFunc(fn) {\n\t  afterThunkCallFunc = fn;\n\t};\n\t\n\tvar Node = function () {\n\t  function Node() {\n\t    _classCallCheck(this, Node);\n\t\n\t    this.tag = null;\n\t    this.id = null;\n\t    this.style = null;\n\t    this.class = null;\n\t    this.children = null;\n\t    this.attributes = null;\n\t    this.events = null;\n\t    this.text = null;\n\t    this.innerHTML = null;\n\t    this.element = null;\n\t    this.hooks = null;\n\t  }\n\t\n\t  _createClass(Node, [{\n\t    key: 'set_selector',\n\t    value: function set_selector(selector) {\n\t      var parts = selector.match(/[.#][A-Za-z][A-Za-z0-9_:-]*/g);\n\t      if (parts) {\n\t        for (var i = 0, l = parts.length; i < l; i++) {\n\t          var part = parts[i];\n\t          if (part.charAt(0) == '#') {\n\t            this.id = part.substring(1);\n\t          } else if (part.charAt(0) == '.') {\n\t            this.class = this.class || {};\n\t            this.class[part.substring(1)] = true;\n\t          }\n\t        }\n\t      }\n\t    }\n\t  }, {\n\t    key: 'set_properties',\n\t    value: function set_properties(properties) {\n\t      for (var key in properties) {\n\t        if (key == 'id' || key == 'innerHTML') {\n\t          // id, innerHTML\n\t          this[key] = properties[key];\n\t        } else if (key == 'class') {\n\t          this.class = this.class || {};\n\t          var property = properties.class;\n\t          if (typeof property == 'string') {\n\t            var parts = property.match(/[A-Za-z][A-Za-z0-9_:-]*/g);\n\t            if (parts) {\n\t              for (var i = 0, l = parts.length; i < l; i++) {\n\t                var part = parts[i];\n\t                this.class[part] = true;\n\t              }\n\t            }\n\t          } else if ((typeof property === 'undefined' ? 'undefined' : _typeof(property)) == 'object' && property !== null) {\n\t            if (Array.isArray(property)) {\n\t              for (var _i4 = 0; _i4 < property.length; _i4++) {\n\t                this.class[property[_i4]] = true;\n\t              }\n\t            } else {\n\t              var classes = [];\n\t              for (var k in property) {\n\t                this.class[k] = property[k];\n\t              }\n\t            }\n\t          } else {\n\t            throw ['bad class', property];\n\t          }\n\t        } else if (key == 'style') {\n\t          // styles\n\t          this.style = properties.style;\n\t        } else if (/^on/.test(key) && typeof properties[key] === 'function') {\n\t          if (key == 'oncreated' || key == 'oncreate') {\n\t            this.hooks = this.hooks || {};\n\t            this.hooks.created = this.hooks.created || [];\n\t            this.hooks.created.push(properties[key]);\n\t          } else if (key == 'onpatch' || key == 'onpatched') {\n\t            this.hooks = this.hooks || {};\n\t            this.hooks.patched = this.hooks.patched || [];\n\t            this.hooks.patched.push(properties[key]);\n\t          } else {\n\t            // events\n\t            this.events = this.events || {};\n\t            this.events[key] = properties[key];\n\t          }\n\t        } else {\n\t          //if (\n\t          //  (this.tag == 'input' && key == 'checked' && !properties[key])\n\t          //  || (this.tag == 'input' && key == 'disabled' && !properties[key])\n\t          //  || (this.tag == 'button' && key == 'disabled' && !properties[key])\n\t          //) {\n\t          //  continue\n\t          //}\n\t          // attributes\n\t          this.attributes = this.attributes || {};\n\t          this.attributes[key] = properties[key];\n\t        }\n\t      }\n\t    }\n\t  }, {\n\t    key: 'set_children',\n\t    value: function set_children(children) {\n\t      this.children = this.children || [];\n\t      var type = typeof children === 'undefined' ? 'undefined' : _typeof(children);\n\t      if (type === 'object' && children !== null) {\n\t        if (Array.isArray(children)) {\n\t          // flatten\n\t          for (var i = 0, l = children.length; i < l; i++) {\n\t            this.set_children(children[i]);\n\t          }\n\t        } else {\n\t          this.children.push(children);\n\t        }\n\t      } else if (type === 'boolean' || type === 'number' || type === 'string' || type === 'symbol') {\n\t        var child = new Node();\n\t        child.text = children.toString();\n\t        this.children.push(child);\n\t      } else if (type === 'function') {\n\t        this.set_children(children());\n\t      } else {\n\t        throw ['bad child', children];\n\t      }\n\t    }\n\t  }, {\n\t    key: 'toElement',\n\t    value: function toElement(name, app) {\n\t      var element = void 0;\n\t      if (this.text !== null) {\n\t        element = document.createTextNode(this.text);\n\t      } else {\n\t        // use cached element\n\t        if (app && app.element_cache[this.tag] && app.element_cache[this.tag].length > 0) {\n\t          var _app$element_cache$ta = app.element_cache[this.tag].pop(),\n\t              _app$element_cache$ta2 = _slicedToArray(_app$element_cache$ta, 2),\n\t              _element = _app$element_cache$ta2[0],\n\t              last_node = _app$element_cache$ta2[1];\n\t\n\t          return app.patch_node(_element, this, last_node)[0];\n\t        }\n\t        element = document.createElement(this.tag);\n\t      }\n\t      if (this.innerHTML !== null) {\n\t        element.innerHTML = this.innerHTML;\n\t      }\n\t      if (this.id !== null) {\n\t        element.id = this.id;\n\t      }\n\t      if (this.style !== null) {\n\t        if (_typeof(this.style) == 'object' && this.style !== null) {\n\t          for (var key in this.style) {\n\t            element.style[key] = this.style[key];\n\t          }\n\t        } else {\n\t          element.style = this.style;\n\t        }\n\t      }\n\t      if (this.class !== null) {\n\t        var className = '';\n\t        for (var k in this.class) {\n\t          if (this.class[k]) {\n\t            className = className + k + ' ';\n\t          }\n\t        }\n\t        element.className = className.trim();\n\t      }\n\t      if (this.children !== null) {\n\t        for (var i = 0, l = this.children.length; i < l; i++) {\n\t          if (!this.children[i] || !this.children[i].toElement) {\n\t            element.appendChild(warning('RENDER ERROR: cannot render ' + this.children[i]).toElement());\n\t            console.warn('cannot render', this.children[i]);\n\t          } else {\n\t            element.appendChild(this.children[i].toElement(undefined, app));\n\t          }\n\t        }\n\t      }\n\t      if (this.attributes !== null) {\n\t        for (var _key19 in this.attributes) {\n\t          var value = this.attributes[_key19];\n\t          var valueType = typeof value === 'undefined' ? 'undefined' : _typeof(value);\n\t          if (valueType == 'string' || valueType == 'number') {\n\t            element.setAttribute(_key19, value);\n\t            element[_key19] = value;\n\t          } else if (valueType == 'boolean') {\n\t            if (value) {\n\t              element.setAttribute(_key19, true);\n\t              element[_key19] = true;\n\t            } else {\n\t              element.removeAttribute(_key19);\n\t              element[_key19] = false;\n\t            }\n\t          }\n\t        }\n\t      }\n\t      if (this.events !== null) {\n\t        for (var _key20 in this.events) {\n\t          // set event callback, bind current Node to callback\n\t          // constructor must not be arrow function to get proper 'this'\n\t          element_set_listener(element, _key20, this.events[_key20].bind(this));\n\t        }\n\t      }\n\t      this.element = element;\n\t      if (this.hooks && this.hooks.created) {\n\t        this.hooks.created.forEach(function (fn) {\n\t          return fn(element);\n\t        });\n\t      }\n\t      return element;\n\t    }\n\t  }]);\n\t\n\t  return Node;\n\t}();\n\t\n\tvar warning = function warning(text) {\n\t  return e('div', {\n\t    style: {\n\t      backgroundColor: 'yellow',\n\t      color: 'red',\n\t      fontWeight: 'bold'\n\t    }\n\t  }, text);\n\t};\n\t\n\tvar element_events = {};\n\tvar element_set_listener = function () {\n\t  var next_element_serial = 1;\n\t  return function (element, ev_type, fn) {\n\t    var serial = element.__element_serial;\n\t    if (!serial) {\n\t      serial = next_element_serial;\n\t      next_element_serial++;\n\t      element.__element_serial = serial;\n\t    }\n\t    var event_set = element_events[serial];\n\t    if (!event_set) {\n\t      event_set = {};\n\t      element_events[serial] = event_set;\n\t    }\n\t    if (!(ev_type in event_set)) {\n\t      element.addEventListener(ev_type.substr(2), function (ev) {\n\t        return element_events[serial][ev_type](ev);\n\t      });\n\t    }\n\t    event_set[ev_type] = fn;\n\t  };\n\t}();\n\t\n\tfunction equal(a, b) {\n\t  if (a === b) {\n\t    return true;\n\t  }\n\t  var type_a = typeof a === 'undefined' ? 'undefined' : _typeof(a);\n\t  var type_b = typeof b === 'undefined' ? 'undefined' : _typeof(b);\n\t  if (type_a !== type_b) {\n\t    return false;\n\t  }\n\t  if (type_a === 'object' && a !== null) {\n\t    if (a instanceof SubState && b instanceof SubState) {\n\t      return equal(a.get(), b.get());\n\t    }\n\t    // deep compare\n\t    var keys_a = Object.keys(a);\n\t    var keys_b = Object.keys(b);\n\t    if (keys_a.length != keys_b.length) {\n\t      return false;\n\t    }\n\t    for (var key in a) {\n\t      if (!equal(a[key], b[key])) {\n\t        return false;\n\t      }\n\t    }\n\t    return true;\n\t  } else if (type_a === 'function') {\n\t    return a.name === b.name;\n\t  }\n\t  return false;\n\t}\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.Event = Event;\n\texports.on = on;\n\tfunction Event(ev_type, fn) {\n\t  this.ev_type = ev_type;\n\t  this.fn = fn;\n\t}\n\t\n\tfunction on(ev_type, fn) {\n\t  return new Event(ev_type, fn);\n\t}\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\texports.pick = pick;\n\t\n\tfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\t\n\t// operations \n\t\n\tvar $inc = exports.$inc = {\n\t  __is_op: true,\n\t  op: 'inc',\n\t  apply: function apply(obj) {\n\t    return (obj || 0) + 1;\n\t  }\n\t};\n\t\n\tvar $dec = exports.$dec = {\n\t  __is_op: true,\n\t  op: 'dec',\n\t  apply: function apply(obj) {\n\t    return obj - 1;\n\t  }\n\t};\n\t\n\tvar $merge = exports.$merge = function $merge(spec) {\n\t  return {\n\t    __is_op: true,\n\t    op: 'merge',\n\t    args: [spec],\n\t    apply: function apply(obj, app) {\n\t      if (Array.isArray(spec)) {\n\t        return app.update_state.apply(app, [app.dirty_tree, obj].concat(_toConsumableArray(spec)));\n\t      }\n\t      for (var key in spec) {\n\t        var o2 = spec[key];\n\t        if ((typeof o2 === 'undefined' ? 'undefined' : _typeof(o2)) == 'object' && !Array.isArray(o2) && !o2.__is_op) {\n\t          obj = app.update_state(app.dirty_tree, obj, key, $merge(o2));\n\t        } else {\n\t          obj = app.update_state(app.dirty_tree, obj, key, o2);\n\t        }\n\t      }\n\t      return obj;\n\t    }\n\t  };\n\t};\n\t\n\tvar $push = exports.$push = function $push(elem) {\n\t  return {\n\t    __is_op: true,\n\t    op: 'push',\n\t    args: [elem],\n\t    apply: function apply(obj) {\n\t      obj.push(elem);\n\t      return obj;\n\t    }\n\t  };\n\t};\n\t\n\tvar $reduce = exports.$reduce = function $reduce(fn, accumulated) {\n\t  var what = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'reduce';\n\t  return {\n\t    __is_op: true,\n\t    op: what,\n\t    args: [fn, accumulated],\n\t    apply: function apply(obj) {\n\t      for (var key in obj) {\n\t        accumulated = fn(accumulated, obj[key], key);\n\t      }\n\t      return accumulated;\n\t    }\n\t  };\n\t};\n\t\n\tvar $del_at = exports.$del_at = function $del_at(i) {\n\t  return $reduce(function (acc, cur, index) {\n\t    if (index != i) {\n\t      acc.push(cur);\n\t    }\n\t    return acc;\n\t  }, [], 'del_at');\n\t};\n\t\n\tvar $map = exports.$map = function $map(fn) {\n\t  return $reduce(function (acc, cur, index) {\n\t    acc.push(fn(cur));\n\t    return acc;\n\t  }, [], 'map');\n\t};\n\t\n\tvar $filter = exports.$filter = function $filter(fn) {\n\t  return {\n\t    __is_op: true,\n\t    op: 'filter',\n\t    args: [fn],\n\t    apply: function apply(obj) {\n\t      if ((typeof obj === 'undefined' ? 'undefined' : _typeof(obj)) == 'object') {\n\t        if (Array.isArray(obj)) {\n\t          var o2 = [];\n\t          for (var i = 0; i < obj.length; i++) {\n\t            if (fn(obj[i], i)) {\n\t              o2.push(obj[i]);\n\t            }\n\t          }\n\t          return o2;\n\t        } else {\n\t          var _o = {};\n\t          for (var k in obj) {\n\t            if (fn(obj[k], k) === true) {\n\t              _o[k] = obj[k];\n\t            }\n\t          }\n\t          return _o;\n\t        }\n\t      } else {\n\t        return fn(obj);\n\t      }\n\t    }\n\t  };\n\t};\n\t\n\t// predictions\n\t\n\tvar $any = exports.$any = { __predict_any: true };\n\t\n\t// utils\n\t\n\tfunction pick(obj) {\n\t  for (var _len = arguments.length, keys = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n\t    keys[_key - 1] = arguments[_key];\n\t  }\n\t\n\t  if ((typeof obj === 'undefined' ? 'undefined' : _typeof(obj)) === 'object') {\n\t    if (Array.isArray(obj)) {\n\t      var new_obj = [];\n\t      for (var i = 0; i < keys.length; i++) {\n\t        var key = keys[i];\n\t        if (obj[key] !== undefined) {\n\t          new_obj.push(obj[key]);\n\t        }\n\t      }\n\t      return new_obj;\n\t    } else {\n\t      var _new_obj = {};\n\t      for (var _i = 0; _i < keys.length; _i++) {\n\t        var _key2 = keys[_i];\n\t        if (obj[_key2] !== undefined) {\n\t          _new_obj[_key2] = obj[_key2];\n\t        }\n\t      }\n\t      return _new_obj;\n\t    }\n\t  } else {\n\t    throw ['not pickable', obj, keys];\n\t  }\n\t}\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.Selector = Selector;\n\texports.$ = $;\n\texports.Css = Css;\n\texports.css = css;\n\tfunction Selector(str) {\n\t  this.str = str;\n\t}\n\t\n\tfunction $(strings) {\n\t  var str = '';\n\t\n\t  for (var _len = arguments.length, values = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n\t    values[_key - 1] = arguments[_key];\n\t  }\n\t\n\t  for (var i = 0; i < strings.length; i++) {\n\t    str += strings[i];\n\t    if (values[i] !== undefined) {\n\t      str += values[i];\n\t    }\n\t  }\n\t  return new Selector(str);\n\t}\n\t\n\tfunction Css(str) {\n\t  this.str = str;\n\t}\n\t\n\tfunction css(strings) {\n\t  var str = '';\n\t\n\t  for (var _len2 = arguments.length, values = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n\t    values[_key2 - 1] = arguments[_key2];\n\t  }\n\t\n\t  for (var i = 0; i < strings.length; i++) {\n\t    str += strings[i];\n\t    if (values[i] !== undefined) {\n\t      str += values[i];\n\t    }\n\t  }\n\t  return new Css(str);\n\t}\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\tvar _app = __webpack_require__(3);\n\t\n\tvar _all_tags = __webpack_require__(2);\n\t\n\tvar helpers = _all_tags.all_tags.reduce(function (helpers, tag) {\n\t  helpers[tag] = function () {\n\t    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t      args[_key] = arguments[_key];\n\t    }\n\t\n\t    return _app.e.apply(undefined, [tag].concat(args));\n\t  };\n\t  helpers[tag.charAt(0).toUpperCase() + tag.slice(1)] = helpers[tag];\n\t  helpers[tag.toUpperCase()] = helpers[tag];\n\t  return helpers;\n\t}, {});\n\t\n\tmodule.exports = _extends({}, helpers, {\n\t\n\t  none: (0, _app.e)('div', {\n\t    style: {\n\t      display: 'none'\n\t    }\n\t  }),\n\t\n\t  clear: (0, _app.e)('div', {\n\t    style: {\n\t      clear: 'both'\n\t    }\n\t  })\n\t});\n\n/***/ }\n/******/ ])\n});\n;\n\n\n// WEBPACK FOOTER //\n// affjs.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 9cc0e6ba10317c9e2cf9","export { \n  App, \n  t, e, \n  setBeforeThunkCallFunc, setAfterThunkCallFunc,\n} from './app';\nexport * from './state';\nexport * from './tags';\nexport * from './tagged';\nexport * from './event';\nexport * from './alias';\n\n\n\n// WEBPACK FOOTER //\n// ./index.js","export function Alias(path) {\n  this.path = path;\n}\n\nexport function alias(...path) {\n  return new Alias(path);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./alias.js","export let all_tags = [\n\n  // html\n  'a', 'abbr', 'acronym', 'address', 'applet', 'area', 'article', 'aside', 'audio',\n  'b', 'base', 'basefont', 'bdi', 'bdo', 'bgsound', 'big', 'blink', 'blockquote', 'body', 'br', 'button',\n  'canvas', 'caption', 'center', 'cite', 'code', 'col', 'colgroup', 'command', 'content',\n  'data', 'datalist', 'dd', 'del', 'details', 'dfn', 'dialog', 'dir', 'div', 'dl', 'dt',\n  'element', 'em', 'embed',\n  'fieldset', 'figcaption', 'figure', 'font', 'footer', 'form', 'frame', 'frameset',\n  'head', 'header', 'hgroup', 'hr', 'html',\n  'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'h7',\n  'i', 'iframe', 'image', 'img', 'input', 'ins', 'isindex',\n  'kbd', 'keygen',\n  'label', 'legend', 'li', 'link', 'listing',\n  'main', 'map', 'mark', 'marquee', 'menu', 'menuitem', 'meta', 'meter', 'multicol',\n  'nav', 'nobr', 'noembed', 'noframes', 'noscript',\n  'object', 'ol', 'optgroup', 'option', 'output',\n  'p', 'param', 'picture', 'plaintext', 'pre', 'progress',\n  'q',\n  'rp', 'rt', 'rtc', 'ruby',\n  's', 'samp', 'script', 'section', 'select', 'shadow', 'small', 'source', 'spacer', 'span', 'strike', 'strong', 'style', 'sub', 'summary', 'sup',\n  'table', 'tbody', 'td', 'template', 'textarea', 'tfoot', 'th', 'thead', 'time', 'title', 'tr', 'track', 'tt',\n  'u', 'ul',\n  'var', 'video',\n  'wbr',\n  'xmp',\n\n  // svg\n  'a', 'altGlyph', 'altGlyphDef', 'altGlyphItem', 'animate', 'animateColor', 'animateMotion', 'animateTransform', 'audio',\n  'canvas', 'circle', 'clipPath', 'color-profile', 'cursor',\n  'defs', 'desc', 'discard',\n  'ellipse',\n  'feBlend', 'feColorMatrix', 'feComponentTransfer', 'feComposite', 'feConvolveMatrix', 'feDiffuseLighting', 'feDisplacementMap', 'feDistantLight',\n  'feDropShadow', 'feFlood', 'feFuncA', 'feFuncB', 'feFuncG', 'feFuncR', 'feGaussianBlur', 'feImage', 'feMerge', 'feMergeNode', 'feMorphology',\n  'feOffset', 'fePointLight', 'feSpecularLighting', 'feSpotLight', 'feTile', 'feTurbulence', 'filter',\n  'font', 'font-face', 'font-face-format', 'font-face-name', 'font-face-src', 'font-face-uri', 'foreignObject',\n  'g', 'glyph', 'glyphRef',\n  'hatch', 'hatchpath', 'hkern',\n  'iframe', 'image',\n  'line', 'linearGradient',\n  'marker', 'mask', 'mesh', 'meshgradient', 'meshpatch', 'meshrow', 'metadata', 'missing-glyph', 'mpath',\n  'path', 'pattern', 'polygon', 'polyline',\n  'radialGradient', 'rect',\n  'script', 'set', 'solidcolor', 'stop', 'style', 'svg', 'switch', 'symbol',\n  'text', 'textPath', 'title', 'tref', 'tspan',\n  'unknown', 'use',\n  'video', 'view', 'vkern',\n\n];\n\n\n\n// WEBPACK FOOTER //\n// ./all_tags.js","import { $any } from './state'\nimport { all_tags } from './all_tags'\nimport { Selector, Css } from './tagged'\nimport { Event } from './event'\nimport { Alias } from './alias'\n\nexport class App {\n  constructor(...args) {\n    this.node = null;\n    this.patching = false;\n    this.patch_tick = 1;\n    this.dirty_tree = {};\n    this.next_dirty_tree = {};\n    this.updated = false;\n    this.update_count = 0;\n    this.element_cache = {};\n    for (let i = 0; i < all_tags.length; i++) {\n      this.element_cache[all_tags[i]] = [];\n    }\n    this.init(...args);\n  }\n\n  init(...args) {\n    for (let i = 0; i < args.length; i++) {\n      let arg = args[i];\n      if (arg instanceof HTMLElement) {\n        this.element = arg;\n      } else if (typeof arg == 'function') {\n        this.node_func = arg;\n      } else {\n        this.state = arg;\n        this.setup_alias(this.state, true);\n      }\n    }\n    if (this.element !== undefined && this.node_func !== undefined && this.state !== undefined) {\n      this.update();\n    }\n  }\n\n  beforeUpdate() {\n  }\n\n  afterUpdate() {\n  }\n\n  update(...args) {\n    this.beforeUpdate(this.state, ...args);\n    this.state = this.update_state(this.next_dirty_tree, this.state, ...args);\n    this.afterUpdate(this.state, ...args);\n    if (!this.element) {\n      return this.state;\n    }\n    if (!this.patching) {\n      this.patching = true;\n      this.updated = false;\n      this.update_count = 0;\n      this.patch_tick++;\n      this.dirty_tree = this.next_dirty_tree;\n      this.next_dirty_tree = {};\n      [this.element, this.node] = this.patch(this.element, this.node_func(this.state), this.node);\n      while (this.updated) {\n        if (this.update_count > 4096) { // infinite loop\n          throw['infinite loop in updating', args];\n        }\n        // if state is updated when patching, patch again\n        this.updated = false;\n        this.patch_tick++;\n        this.dirty_tree = this.next_dirty_tree;\n        this.next_dirty_tree = {};\n        [this.element, this.node] = this.patch(this.element, this.node_func(this.state), this.node);\n      }\n      this.patching = false;\n      this.update_count = 0;\n    } else {\n      // state updated when patching\n      this.updated = true;\n      this.update_count++;\n    }\n    return this.state;\n  }\n\n  tap(fn) {\n    let res = fn(this.state);\n    if (res) {\n      this.update(...(Array.isArray(res) ? res : [res]));\n    }\n  }\n\n  html() {\n    return this.element.innerHTML;\n  }\n\n  get(...args) {\n    let path = args;\n    if (path.length == 1 && Array.isArray(path[0])) {\n      path = path[0];\n    }\n    let obj = this.state;\n    for (let i = 0; i < path.length; i++) {\n      obj = obj[path[i]];\n    }\n    return obj;\n  }\n\n  sub(...args) {\n    let path = args;\n    if (path.length == 1 && Array.isArray(path[0])) {\n      path = path[0];\n    }\n    return new SubState(this, path);\n  }\n\n  update_state(dirty_tree, obj, ...args) {\n    if (args.length === 0) {\n      return obj;\n    } else if (args.length === 1) {\n      let ret;\n      if (typeof args[0] === 'object' && args[0] !== null && args[0].__is_op) {\n        ret = args[0].apply(obj, this);\n        if (ret === obj) {\n          this.setup_patch_tick(ret);\n        }\n      } else {\n        ret = args[0];\n      }\n      this.setup_alias(ret, true);\n      return ret;\n    } else {\n      if (!obj) {\n        obj = {};\n      }\n      if (typeof obj === 'object' && obj !== null) {\n        if (!obj.hasOwnProperty('__aff_tick')) {\n          this.setup_patch_tick(obj);\n        }\n        let key = args[0];\n        for (let k in obj) {\n          if (k == key || key === $any) {\n            if (!dirty_tree[k]) {\n              dirty_tree[k] = {};\n            }\n            obj[k] = this.update_state(dirty_tree[k], obj[k], ...args.slice(1));\n          }\n        }\n        if (key !== $any && !(key in obj)) {\n          if (!dirty_tree[key]) {\n            dirty_tree[key] = {};\n          }\n          obj[key] = this.update_state(dirty_tree[key], undefined, ...args.slice(1));\n        }\n        obj.__aff_tick = this.patch_tick + 1;\n        this.setup_alias(obj);\n        return obj;\n      } else {\n        throw['bad update path', obj, args];\n      }\n    }\n  }\n\n  setup_patch_tick(obj) {\n    if (obj.hasOwnProperty('__aff_tick')) {\n      obj.__aff_tick = this.patch_tick + 1;\n    } else {\n      Object.defineProperty(obj, '__aff_tick', {\n        configurable: false,\n        enumerable: false,\n        writable: true,\n        value: this.patch_tick + 1,\n      });\n    }\n  }\n\n  setup_alias(obj, recursive) {\n    if (typeof obj !== 'object' || obj === null) {\n      return\n    }\n    for (let key in obj) {\n      if (obj[key] instanceof Alias) {\n        const path = obj[key].path;\n        const app = this;\n        Object.defineProperty(obj, key, {\n          enumerable: true,\n          get: function() {\n            return app.get(path);\n          },\n          set: function(v) {\n            app.update(...path, v);\n          },\n        });\n      } else {\n        if (recursive) {\n          this.setup_alias(obj[key], true);\n        }\n      }\n    }\n  }\n\n  // patch last_element to represent node attributes, with diffing last_node\n  patch(last_element, node, last_node) {\n    // thunk\n    let last_thunk;\n    if (last_node && last_node instanceof Thunk) {\n      last_thunk = last_node;\n      last_node = last_thunk.node;\n    }\n    let thunk;\n    if (node instanceof Thunk) {\n      thunk = node;\n    }\n\n    let should_update = false;\n    if (!thunk || !last_thunk) {\n      should_update = true;\n    } else if (thunk.name != last_thunk.name) {\n      should_update = true;\n    } else if (thunk.args.length != last_thunk.args.length) {\n      should_update = true;\n    } else {\n      for (let i = 0; i < thunk.args.length; i++) {\n        let arg = thunk.args[i];\n        let last_arg = last_thunk.args[i];\n        if (arg instanceof SubState && last_arg instanceof SubState) {\n          let max_dirty_index = -1;\n          let max_same_index = -1;\n          let dirty_tree = this.dirty_tree;\n          let last_path = last_arg.path;\n          for (let index = 0; index < arg.path.length; index++) {\n            if (dirty_tree && dirty_tree[arg.path[index]]) {\n              dirty_tree = dirty_tree[arg.path[index]];\n              max_dirty_index = index;\n            }\n            if (last_path[index] == arg.path[index]) {\n              max_same_index = index;\n            }\n          }\n          if (max_dirty_index == arg.path.length - 1) {\n            should_update = true;\n            break\n          }\n          if (max_same_index != arg.path.length - 1) {\n            should_update = true;\n            break\n          }\n        } else if (arg === last_arg && typeof arg === 'object' && arg !== null && arg.__aff_tick === this.patch_tick) {\n          should_update = true;\n          break\n        } else if (!equal(arg, last_arg)) {\n          should_update = true;\n          break\n        }\n      }\n    }\n\n    if (thunk) {\n      if (last_thunk && !should_update) {\n        // reuse node\n        thunk.node = last_thunk.node;\n        // reuse element\n        thunk.element = last_thunk.element;\n      }\n      node = thunk.getNode();\n    }\n\n    // Thunk.getNode may return another Thunk, patch recursively\n    if (node instanceof Thunk || last_node instanceof Thunk) {\n      return this.patch(last_element, node, last_node);\n    }\n\n    // no need to patch if two Nodes is the same object\n    // if thunk's node is reuse, will return here\n    if (node === last_node) {\n      return [last_element, node];\n    }\n\n    // not patchable, build a new element\n    if (\n      // not diffable\n      (!last_node)\n      // different tag, no way to patch\n      || (node.tag != last_node.tag)\n    ) {\n      let element;\n      if (!node || !node.toElement) {\n        element = warning(`RENDER ERROR: cannot render ${node}`).toElement();\n        console.warn('cannot render', node);\n      } else {\n        element = node.toElement(undefined, this);\n      }\n      // insert new then remove old\n      if (last_element.parentNode) {\n        last_element.parentNode.insertBefore(element, last_element);\n        last_element.parentNode.removeChild(last_element);\n      }\n      // cache last_element\n      if (last_node) {\n        this.element_cache[last_element.tagName.toLowerCase()].push([last_element, last_node]);\n      }\n\n      return [element, node];\n    }\n\n    // set element\n    node.element = last_element;\n    if (thunk) {\n      thunk.element = last_element;\n    }\n\n    return this.patch_node(last_element, node, last_node);\n  }\n\n  patch_node(last_element, node, last_node) {\n    // innerHTML\n    if (node.innerHTML != last_node.innerHTML) {\n      last_element.innerHTML = node.innerHTML;\n    }\n\n    // text\n    if (node.text != last_node.text) {\n      last_element.nodeValue = node.text;\n    }\n\n    // id\n    if (node.id != last_node.id) {\n      last_element.id = node.id;\n    }\n\n    // styles\n    let style_type = typeof node.style;\n    let last_style_type = typeof last_node.style;\n    if (style_type != last_style_type || style_type == 'string') {\n      // not diffable\n      if (style_type == 'object' && node.style !== null) {\n        // remove all existing style\n        last_element.style = null;\n        // reset\n        for (let key in node.style) {\n          last_element.style[key] = node.style[key];\n        }\n      } else {\n        // set string style\n        if (node.style != last_node.style) {\n          last_element.style = node.style;\n        }\n      }\n    } else {\n      if (node.style && last_node.style) {\n        // common styles\n        for (let key in node.style) {\n          if (node.style[key] != last_node.style[key]) {\n            last_element.style[key] = node.style[key];\n          }\n        }\n        // delete styles exist in old Node but not in new\n        if (typeof last_node.style === 'object' && last_node.style !== null) {\n          for (let key in last_node.style) {\n            if (!(key in node.style)) {\n              last_element.style[key] = '';\n            }\n          }\n        }\n      } else if (node.style) {\n        // new Node only\n        for (let key in node.style) {\n          last_element.style[key] = node.style[key];\n        }\n      } else if (last_node.style) {\n        // no style in new Node, delete all\n        last_element.style = undefined;\n      }\n    }\n\n    // class\n    for (let key in node.class) {\n      // should update\n      if (!last_node.class || node.class[key] != last_node.class[key]) {\n        if (node.class[key]) {\n          last_element.classList.add(key);\n        } else {\n          last_element.classList.remove(key);\n        }\n      }\n    }\n    for (let key in last_node.class) {\n      if (!node.class || !(key in node.class)) {\n        last_element.classList.remove(key);\n      }\n    }\n\n    // attributes\n    for (let key in node.attributes) {\n      if (!last_node.attributes || node.attributes[key] != last_node.attributes[key]) {\n        let value = node.attributes[key];\n        let valueType = typeof value;\n        if (valueType == 'string' || valueType == 'number') {\n          last_element.setAttribute(key, value);\n          last_element[key] = value\n        } else if (valueType == 'boolean') {\n          if (value) {\n            last_element.setAttribute(key, true);\n            last_element[key] = true;\n          } else {\n            last_element.removeAttribute(key);\n            last_element[key] = false;\n          }\n        }\n      }\n    }\n    for (let key in last_node.attributes) {\n      if (!node.attributes || !(key in node.attributes)) {\n        last_element.removeAttribute(key);\n        last_element[key] = undefined;\n      }\n    }\n\n    // events\n    for (let key in node.events) {\n      element_set_listener(last_element, key, node.events[key].bind(node));\n    }\n    let serial = last_element.__element_serial;\n    for (let key in element_events[serial]) {\n      if (!node.events || !(key in node.events)) {\n        element_events[serial][key] = false;\n      }\n    }\n\n    // children\n    if (node.children && last_node.children) {\n      // patch common amount of children\n      let common_length = Math.min(node.children.length, last_node.children.length);\n      let child_elements = last_element.childNodes;\n      for (let i = 0; i < common_length; i++) {\n        // recursive patch\n        this.patch(child_elements[i], node.children[i], last_node.children[i]);\n      }\n      // insert new children\n      for (let i = common_length, l = node.children.length; i < l; i++) {\n        if (!node.children[i] || !node.children[i].toElement) {\n          last_element.appendChild(warning(`RENDER ERROR: cannot render ${node.children[i]}`).toElement());\n          console.warn('cannot render', node.children[i]);\n        } else {\n          last_element.appendChild(node.children[i].toElement(undefined, this));\n        }\n      }\n      // delete\n      for (let i = common_length, l = last_node.children.length; i < l; i++) {\n        last_element.removeChild(last_element.childNodes[common_length]);\n      }\n    } else if (node.children) {\n      // insert only\n      for (let i = 0, l = node.children.length; i < l; i++) {\n        if (!node.children[i] || !node.children[i].toElement) {\n          last_element.appendChild(warning(`RENDER ERROR: cannot render ${node.children[i]}`).toElement());\n          console.warn('cannot render', node.children[i]);\n        } else {\n          last_element.appendChild(node.children[i].toElement(undefined, this));\n        }\n      }\n    } else if (last_node.children) {\n      // delete only\n      while (last_element.firstChild) {\n        last_element.removeChild(last_element.firstChild);\n      }\n    }\n\n    if (node.hooks && node.hooks.patched) {\n      node.hooks.patched.forEach(fn => fn(last_element));\n    }\n\n    return [last_element, node];\n  }\n}\n\nclass SubState {\n  constructor(app, path) {\n    this.app = app;\n    this.path = path;\n  }\n\n  get() {\n    return this.app.get(this.path);\n  }\n\n  update(...args) {\n    return this.app.update(...this.path, ...args);\n  }\n\n  sub(...args) {\n    let subpath = args;\n    if (subpath.length == 1 && Array.isArray(subpath[0])) {\n      subpath = subpath[0];\n    }\n    return new SubState(this.app, [...this.path, ...subpath]);\n  }\n}\n\nclass Thunk {\n  constructor() {\n    this.func = null;\n    this.args = null;\n    this.node = undefined;\n    this.element = null;\n    this.name = null;\n  }\n\n  toElement(_name, app) {\n    if (!this.element) {\n      let node = this.getNode();\n      if (!node || !node.toElement) {\n        this.element = warning(`RENDER ERROR: cannot render ${node}`).toElement();\n        console.warn('cannot render', node);\n      } else {\n        this.element = node.toElement(this.name, app);\n      }\n    }\n    return this.element;\n  }\n\n  getNode() {\n    if (!this.node) {\n      beforeThunkCallFunc(this);\n      this.node = this.func.apply(this, this.args);\n      afterThunkCallFunc(this);\n      if (this.node === null) {\n        this.node = e('div', { style: { display: 'none' }});\n      }\n      if (!this.node) {\n        throw['constructor of ' + (this.name || 'anonymous') + ' returned undefined value', this];\n      }\n    }\n    return this.node;\n  }\n\n}\n\n// thunk helper\nexport function t(...args) {\n  if (args.length == 0) {\n    throw['no arguments to t()'];\n  }\n  let thunk = new Thunk();\n  switch (typeof args[0]) {\n  case 'string': // named thunk\n    thunk.name = args[0];\n    thunk.func = args[1];\n    thunk.args = args.slice(2);\n    break\n  case 'function':\n    thunk.func = args[0];\n    thunk.args = args.slice(1);\n    thunk.name = thunk.func.name;\n    break\n  }\n  return thunk\n}\n\n// element helper\nexport function e(tag, ...args) {\n  if (typeof tag !== 'string') {\n    throw['bad tag name', tag];\n  }\n  let node = new Node();\n  node.tag = tag;\n  for (let i = 0; i < args.length; i++) {\n    let arg = args[i];\n    if (arg instanceof Node || arg instanceof Thunk) {\n      node.set_children(arg);\n    } else if (arg instanceof Selector) {\n      node.set_selector(arg.str);\n    } else if (arg instanceof Css) {\n      node.set_properties({\n        style: arg.str,\n      });\n    } else if (arg instanceof Event) {\n      node.set_properties({\n        ['on' + arg.ev_type]: arg.fn,\n      });\n    } else if (typeof arg === 'object' && arg !== null) {\n      if (Array.isArray(arg)) {\n        node.set_children(arg)\n      } else {\n        node.set_properties(arg);\n      }\n    } else {\n      node.set_children(arg);\n    }\n  }\n  return node;\n}\n\nlet beforeThunkCallFunc = (thunk) => {};\nlet afterThunkCallFunc = (thunk) => {};\nexport let setBeforeThunkCallFunc = (fn) => {\n  beforeThunkCallFunc = fn;\n}\nexport let setAfterThunkCallFunc = (fn) => {\n  afterThunkCallFunc = fn;\n}\n\nclass Node {\n  constructor() {\n    this.tag = null;\n    this.id = null;\n    this.style = null;\n    this.class = null;\n    this.children = null;\n    this.attributes = null;\n    this.events = null;\n    this.text = null;\n    this.innerHTML = null;\n    this.element = null;\n    this.hooks = null;\n  }\n\n  set_selector(selector) {\n    let parts = selector.match(/[.#][A-Za-z][A-Za-z0-9_:-]*/g);\n    if (parts) {\n      for (let i = 0, l = parts.length; i < l; i++) {\n        let part = parts[i];\n        if (part.charAt(0) == '#') {\n          this.id = part.substring(1);\n        } else if (part.charAt(0) == '.') {\n          this.class = this.class || {};\n          this.class[part.substring(1)] = true;\n        }\n      }\n    }\n  }\n\n  set_properties(properties) {\n    for (let key in properties) {\n      if (key == 'id' || key == 'innerHTML') {\n        // id, innerHTML\n        this[key] = properties[key];\n      } else if (key == 'class') {\n        this.class = this.class || {};\n        let property = properties.class;\n        if (typeof property == 'string') {\n          let parts = property.match(/[A-Za-z][A-Za-z0-9_:-]*/g);\n          if (parts) {\n            for (let i = 0, l = parts.length; i < l; i++) {\n              let part = parts[i];\n              this.class[part] = true;\n            }\n          }\n        } else if (typeof property == 'object' && property !== null) {\n          if (Array.isArray(property)) {\n            for (let i = 0; i < property.length; i++) {\n              this.class[property[i]] = true;\n            }\n          } else {\n            let classes = [];\n            for (let k in property) {\n              this.class[k] = property[k];\n            }\n          }\n        } else {\n          throw['bad class', property];\n        }\n      } else if (key == 'style') {\n        // styles\n        this.style = properties.style;\n      } else if (/^on/.test(key) && typeof properties[key] === 'function') {\n        if (key == 'oncreated' || key == 'oncreate') {\n          this.hooks = this.hooks || {};\n          this.hooks.created = this.hooks.created || [];\n          this.hooks.created.push(properties[key]);\n        } else if (key == 'onpatch' || key == 'onpatched') {\n          this.hooks = this.hooks || {};\n          this.hooks.patched = this.hooks.patched || [];\n          this.hooks.patched.push(properties[key]);\n        } else {\n          // events\n          this.events = this.events || {};\n          this.events[key] = properties[key];\n        }\n      } else {\n        //if (\n        //  (this.tag == 'input' && key == 'checked' && !properties[key])\n        //  || (this.tag == 'input' && key == 'disabled' && !properties[key])\n        //  || (this.tag == 'button' && key == 'disabled' && !properties[key])\n        //) {\n        //  continue\n        //}\n        // attributes\n        this.attributes = this.attributes || {};\n        this.attributes[key] = properties[key];\n      }\n    }\n  }\n\n  set_children(children) {\n    this.children = this.children || [];\n    let type = typeof children;\n    if (type === 'object' && children !== null) {\n      if (Array.isArray(children)) {\n        // flatten\n        for (let i = 0, l = children.length; i < l; i++) {\n          this.set_children(children[i]);\n        }\n      } else {\n        this.children.push(children);\n      }\n    } else if (type === 'boolean' || type === 'number' || type === 'string' || type === 'symbol') {\n      let child = new Node();\n      child.text = children.toString();\n      this.children.push(child);\n    } else if (type === 'function') {\n      this.set_children(children());\n    } else {\n      throw['bad child', children];\n    }\n  }\n\n  toElement(name, app) {\n    let element;\n    if (this.text !== null) {\n      element = document.createTextNode(this.text);\n    } else {\n      // use cached element\n      if (app && app.element_cache[this.tag] && app.element_cache[this.tag].length > 0) {\n        let [element, last_node] = app.element_cache[this.tag].pop();\n        return app.patch_node(element, this, last_node)[0];\n      }\n      element = document.createElement(this.tag);\n    }\n    if (this.innerHTML !== null) {\n      element.innerHTML = this.innerHTML;\n    }\n    if (this.id !== null) {\n      element.id = this.id;\n    }\n    if (this.style !== null) {\n      if (typeof this.style == 'object' && this.style !== null) {\n        for (let key in this.style) {\n          element.style[key] = this.style[key];\n        }\n      } else {\n        element.style = this.style;\n      }\n    }\n    if (this.class !== null) {\n      let className = '';\n      for (let k in this.class) {\n        if (this.class[k]) {\n          className = className + k + ' ';\n        }\n      }\n      element.className = className.trim();\n    }\n    if (this.children !== null) {\n      for (let i = 0, l = this.children.length; i < l; i++) {\n        if (!this.children[i] || !this.children[i].toElement) {\n          element.appendChild(warning(`RENDER ERROR: cannot render ${this.children[i]}`).toElement());\n          console.warn('cannot render', this.children[i]);\n        } else {\n          element.appendChild(this.children[i].toElement(undefined, app));\n        }\n      }\n    }\n    if (this.attributes !== null) {\n      for (let key in this.attributes) {\n        let value = this.attributes[key];\n        let valueType = typeof value;\n        if (valueType == 'string' || valueType == 'number') {\n          element.setAttribute(key, value);\n          element[key] = value;\n        } else if (valueType == 'boolean') {\n          if (value) {\n            element.setAttribute(key, true);\n            element[key] = true;\n          } else {\n            element.removeAttribute(key);\n            element[key] = false;\n          }\n        }\n      }\n    }\n    if (this.events !== null) {\n      for (let key in this.events) {\n        // set event callback, bind current Node to callback\n        // constructor must not be arrow function to get proper 'this'\n        element_set_listener(element, key, this.events[key].bind(this));\n      }\n    }\n    this.element = element;\n    if (this.hooks && this.hooks.created) {\n      this.hooks.created.forEach(fn => fn(element));\n    }\n    return element;\n  }\n\n}\n\nlet warning = (text) => e('div', {\n  style: {\n    backgroundColor: 'yellow',\n    color: 'red',\n    fontWeight: 'bold',\n  },\n}, text);\n\nlet element_events = {};\nlet element_set_listener = (() => {\n  let next_element_serial = 1;\n  return function(element, ev_type, fn) {\n    let serial = element.__element_serial;\n    if (!serial) {\n      serial = next_element_serial;\n      next_element_serial++;\n      element.__element_serial = serial;\n    }\n    let event_set = element_events[serial];\n    if (!event_set) {\n      event_set = {};\n      element_events[serial] = event_set;\n    }\n    if (!(ev_type in event_set)) {\n      element.addEventListener(ev_type.substr(2), function(ev) {\n        return element_events[serial][ev_type](ev);\n      });\n    }\n    event_set[ev_type] = fn;\n  }\n})();\n\nexport function equal(a, b) {\n  if (a === b) {\n    return true;\n  }\n  let type_a = typeof a;\n  let type_b = typeof b;\n  if (type_a !== type_b) {\n    return false;\n  }\n  if (type_a === 'object' && a !== null) {\n    if (a instanceof SubState && b instanceof SubState) {\n      return equal(a.get(), b.get());\n    }\n    // deep compare\n    let keys_a = Object.keys(a);\n    let keys_b = Object.keys(b);\n    if (keys_a.length != keys_b.length) {\n      return false;\n    }\n    for (let key in a) {\n      if (!equal(a[key], b[key])) {\n        return false;\n      }\n    }\n    return true;\n  } else if (type_a === 'function') {\n    return a.name === b.name;\n  }\n  return false;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app.js","export function Event(ev_type, fn) {\n  this.ev_type = ev_type;\n  this.fn = fn;\n}\n\nexport function on(ev_type, fn) {\n  return new Event(ev_type, fn);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./event.js","// operations \n\nexport let $inc = {\n  __is_op: true,\n  op: 'inc',\n  apply(obj) {\n    return (obj || 0) + 1;\n  },\n};\n\nexport let $dec = {\n  __is_op: true,\n  op: 'dec',\n  apply(obj) {\n    return obj - 1;\n  }\n};\n\nexport let $merge = (spec) => ({\n  __is_op: true,\n  op: 'merge',\n  args: [spec],\n  apply(obj, app) {\n    if (Array.isArray(spec)) {\n      return app.update_state(app.dirty_tree, obj, ...spec);\n    }\n    for (let key in spec) {\n      let o2 = spec[key];\n      if (typeof o2 == 'object' && !Array.isArray(o2) && !o2.__is_op) {\n        obj = app.update_state(app.dirty_tree, obj, key, $merge(o2));\n      } else {\n        obj = app.update_state(app.dirty_tree, obj, key, o2);\n      }\n    }\n    return obj;\n  },\n});\n\nexport let $push = (elem) => ({\n  __is_op: true,\n  op: 'push',\n  args: [elem],\n  apply(obj) {\n    obj.push(elem);\n    return obj;\n  },\n});\n\nexport let $reduce = (fn, accumulated, what = 'reduce') => ({\n  __is_op: true,\n  op: what,\n  args: [fn, accumulated],\n  apply(obj) {\n    for (let key in obj) {\n      accumulated = fn(accumulated, obj[key], key);\n    }\n    return accumulated;\n  },\n});\n\nexport let $del_at = (i) => $reduce((acc, cur, index) => {\n  if (index != i) {\n    acc.push(cur);\n  }\n  return acc;\n}, [], 'del_at');\n\nexport let $map = (fn) => $reduce((acc, cur, index) => {\n  acc.push(fn(cur));\n  return acc;\n}, [], 'map');\n\nexport let $filter = (fn) => ({\n  __is_op: true,\n  op: 'filter',\n  args: [fn],\n  apply(obj) {\n    if (typeof obj == 'object') {\n      if (Array.isArray(obj)) {\n        let o2 = [];\n        for (let i = 0; i < obj.length; i++) {\n          if (fn(obj[i], i)) {\n            o2.push(obj[i]);\n          }\n        }\n        return o2;\n      } else {\n        let o2 = {};\n        for (let k in obj) {\n          if (fn(obj[k], k) === true) {\n            o2[k] = obj[k];\n          }\n        }\n        return o2;\n      }\n    } else {\n      return fn(obj);\n    }\n  },\n});\n\n// predictions\n\nexport let $any = { __predict_any: true };\n\n// utils\n\nexport function pick(obj, ...keys) {\n  if (typeof obj === 'object') {\n    if (Array.isArray(obj)) {\n      let new_obj = [];\n      for (let i = 0; i < keys.length; i++) {\n        let key = keys[i];\n        if (obj[key] !== undefined) {\n          new_obj.push(obj[key]);\n        }\n      }\n      return new_obj;\n    } else {\n      let new_obj = {};\n      for (let i = 0; i < keys.length; i++) {\n        let key = keys[i];\n        if (obj[key] !== undefined) {\n          new_obj[key] = obj[key];\n        }\n      }\n      return new_obj;\n    }\n  } else {\n    throw['not pickable', obj, keys];\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./state.js","export function Selector(str) {\n  this.str = str;\n}\n\nexport function $(strings, ...values) {\n  let str = '';\n  for (let i = 0; i < strings.length; i++) {\n    str += strings[i];\n    if (values[i] !== undefined) {\n      str += values[i];\n    }\n  }\n  return new Selector(str);\n}\n\nexport function Css(str) {\n  this.str = str;\n}\n\nexport function css(strings, ...values) {\n  let str = '';\n  for (let i = 0; i < strings.length; i++) {\n    str += strings[i];\n    if (values[i] !== undefined) {\n      str += values[i];\n    }\n  }\n  return new Css(str);\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./tagged.js","import {e} from './app'\nimport { all_tags } from './all_tags'\n\nlet helpers = all_tags.reduce((helpers, tag) => {\n  helpers[tag] = function(...args) {\n    return e(tag, ...args);\n  };\n  helpers[tag.charAt(0).toUpperCase() + tag.slice(1)] = helpers[tag];\n  helpers[tag.toUpperCase()] = helpers[tag];\n  return helpers;\n}, {});\n\nmodule.exports = {\n  ...helpers,\n\n  none: e('div', {\n    style: {\n      display: 'none',\n    },\n  }),\n\n  clear: e('div', {\n    style: {\n      clear: 'both',\n    },\n  }),\n};\n\n\n\n// WEBPACK FOOTER //\n// ./tags.js"],"sourceRoot":""}