{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap d566797f65cc6fde2178","webpack:///./index.js","webpack:///./app.js","webpack:///./all_tags.js","webpack:///./tagged.js","webpack:///./event.js","webpack:///./mutable_state.js","webpack:///./state.js","webpack:///./operations.js","webpack:///./tags.js","webpack:///./bind.js","webpack:///./debug.js"],"names":["t","e","App","node","patching","updated","updateCount","elementCache","i","length","events","init","args","arg","HTMLElement","element","idx","addEvent","nodeFunc","_state","setupUses","get","undefined","update","obj","path","scopes","Array","isArray","useInfos","use","key","app","setGetter","from","parentPathOfFrom","slice","pop","Object","defineProperty","configurable","enumerable","set","v","__aff_use_keys","writable","value","name","found","bindings","stopPath","sameLen","stopLen","setupPath","p","push","ev","parts","type","split","subtype","join","fn","apply","updateMulti","dispatchEvent","state","beforePatch","patch","innerHTML","lastElement","lastNode","lastThunk","Thunk","thunk","shouldUpdate","argsChanged","getNode","tag","toElement","parentNode","insertBefore","removeChild","tagName","toLowerCase","patchNode","text","nodeValue","id","styleType","style","lastStyleType","classList","add","remove","attributes","valueType","setAttribute","removeAttribute","eventKeys","k","elementSetEvent","bind","__aff_events","childElements","childNodes","childLen","children","lastChildLen","elem","_","appendChild","hooks","patched","forEach","func","_name","warning","console","warn","beforeThunkCallFunc","afterThunkCallFunc","display","Node","_e","skip","skipFollowingArguments","setChildren","setSelector","str","setProperties","setBeforeThunkCallFunc","setAfterThunkCallFunc","selector","match","l","part","charAt","substring","properties","property","currentType","test","created","child","toString","document","createTextNode","createElement","className","trim","childFragment","createDocumentFragment","backgroundColor","color","fontWeight","addEventListener","substr","ret","allTags","Selector","Css","makeTagger","constructor","strings","values","$","css","on","Event","Events","MutableState","initState","patchTick","setupState","updateState","basePath","__is_op","setupPatchTick","forceSetup","hasOwnProperty","keyType","__aff_tick","lastArg","argType","__aff_tick_update_at","fromPath","tick","keys","__aff_read_only","$path","reduce","acc","cur","subPath","readOnly","State","$func","op","$delete","prop","$del","$inc","$dec","arrayOps","prototype","unshift","splice","fill","sort","info","method","filter","map","shift","reverse","$merge","spec","_merge","$any","module","exports","helpers","toUpperCase","checkbox","none","clear","Checkbox","CHECKBOX","bindFocus","bindEnter","bindOver","$update","bindHover","logUpdates","log","formatUpdatePath","formatUpdateArg"],"mappings":"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","file":"affjs.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"affjs\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"affjs\"] = factory();\n\telse\n\t\troot[\"affjs\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap d566797f65cc6fde2178","export * from './app';\nexport * from './operations';\nexport * from './tags';\nexport * from './tagged';\nexport * from './event';\nexport * from './mutable_state';\nexport * from './state';\nexport * from './bind';\nexport * from './debug';\n\n\n\n// WEBPACK FOOTER //\n// ./index.js","import { allTags } from './all_tags'\nimport { Selector, Css } from './tagged'\nimport { Events } from './event'\nimport { MutableState } from './mutable_state'\n\nexport class App {\n  constructor(...args) {\n    this.node = null;\n    this.patching = false;\n    this.updated = false;\n    this.updateCount = 0;\n    this.elementCache = {};\n    for (let i = 0; i < allTags.length; i++) {\n      this.elementCache[allTags[i]] = [];\n    }\n    this.events = {};\n    this.init(...args);\n  }\n\n  init(...args) {\n    for (let i = 0; i < args.length; i++) {\n      const arg = args[i];\n      if (arg instanceof HTMLElement) {\n        this.element = arg;\n      } else if (arg instanceof Events) {\n        for (let idx = 0; idx < arg.events.length; idx++) {\n          this.addEvent(arg.events[idx]);\n        }\n      } else if (typeof arg == 'function') {\n        this.nodeFunc = arg;\n      } else {\n        this._state = new MutableState(arg, this);\n        this.setupUses(this._state.get());\n      }\n    }\n    if (\n      this.element !== undefined \n      && this.nodeFunc !== undefined \n      && this._state !== undefined\n    ) {\n      this.update();\n    }\n  }\n\n  setupUses(obj, path, scopes) {\n    // skip non-object\n    if (typeof obj !== 'object' || obj === null || Array.isArray(obj)) {\n      return\n    }\n\n    // default arguments\n    path = path || [];\n    scopes = scopes || [];\n\n    // parse $use\n    let useInfos;\n    if ('$use' in obj) {\n      const use = obj['$use'];\n      if (typeof use === 'object' && use !== null) {\n        if (Array.isArray(use)) {\n          useInfos = {};\n          for (let i = 0; i < use.length; i++) {\n            const key = use[i];\n            if (key in obj) {\n              throw['use key conflict', key];\n            }\n            useInfos[key] = key;\n          }\n        } else {\n          for (const key in use) {\n            if (key in obj) {\n              throw['use key conflict', key];\n            }\n          }\n          useInfos = use;\n        }\n        delete obj['$use'];\n      } else {\n        throw['bad use', use];\n      }\n    }\n\n    const app = this;\n    function setGetter(obj, key, from) {\n      const parentPathOfFrom = from.slice(0);\n      parentPathOfFrom.pop();\n      if (!(key in obj)) {\n        Object.defineProperty(obj, key, {\n          configurable: false,\n          enumerable: true,\n          get: function() {\n            return app.get(from);\n          },\n          set: function(v) {\n            app.update(...from, v);\n          },\n        });\n      }\n      if (!obj.__aff_use_keys) {\n        Object.defineProperty(obj, '__aff_use_keys', {\n          configurable: false,\n          writable: true,\n          enumerable: false,\n          value: {},\n        });\n      }\n      obj.__aff_use_keys[key] = from;\n    }\n\n    // setup\n    for (const key in useInfos) {\n      const name = useInfos[key];\n      // search in scopes\n      let found = false;\n      for (let i = 0; i < scopes.length; i++) {\n        const bindings = scopes[i];\n        if (name in bindings) { // found\n          found = true;\n          let stopPath = bindings[name].slice(0);\n          // check loop\n          let sameLen = 0;\n          for (let idx = 0; idx < stopPath.length && idx < path.length; idx++) {\n            if (stopPath[idx] == path[idx]) {\n              sameLen++\n            } else {\n              break\n            }\n          }\n          if (sameLen == stopPath.length || sameLen == path.length) {\n            throw['loop in $use', path, stopPath];\n          }\n          stopPath.pop();\n          const stopLen = stopPath.length;\n          let setupPath = path.slice(0);\n          while (setupPath.length > stopLen) {\n            //console.log('get', setupPath, key, 'from', bindings[name]);\n            setGetter(this.get(setupPath), key, bindings[name]);\n            setupPath.pop();\n          }\n        }\n      }\n      if (!found) {\n        throw[`no state named ${name}`];\n      }\n    }\n\n    // collect bindings\n    const bindings = {};\n    for (const key in obj) {\n      const p = path.slice(0);\n      p.push(key);\n      bindings[key] = p;\n    }\n    scopes = scopes.slice(0); // copy\n    scopes.push(bindings);\n\n    // recursively\n    for (let key in obj) {\n      let p = path.slice(0);\n      p.push(key);\n      this.setupUses(obj[key], p, scopes);\n    }\n\n  }\n\n  addEvent(ev) {\n    const parts = ev.type.split(/[$:]/);\n    const type = parts[0];\n    const subtype = parts.slice(1).join(':') || '__default';\n    if (!(type in this.events)) {\n      this.events[type] = {};\n    }\n    const events = this.events[type];\n    events[subtype] = ev.fn;\n  }\n\n  dispatchEvent(type, ...args) {\n    for (const subtype in this.events[type]) {\n      this.events[type][subtype].apply(this, args);\n    }\n  }\n\n  get state() {\n    return this._state.get();\n  }\n\n  update(...args) {\n    return this.updateMulti(args);\n  }\n\n  updateMulti(...args) {\n    for (let i = 0; i < args.length; i++) {\n      let arg = args[i];\n      this.dispatchEvent('beforeUpdate', this.state, ...arg);\n      this._state.update(...arg);\n      this.dispatchEvent('afterUpdate', this.state, ...arg);\n    }\n    if (!this.element) {\n      return this.state;\n    }\n    if (!this.patching) {\n      this.patching = true;\n      this.updated = false;\n      this.updateCount = 0;\n      this._state.beforePatch();\n      [this.element, this.node] = this.patch(\n        this.element, \n        this.nodeFunc(this.state), \n        this.node,\n      );\n      while (this.updated) {\n        if (this.updateCount > 4096) { // infinite loop\n          throw['infinite loop in updating', args];\n        }\n        // if state is updated when patching, patch again\n        this.updated = false;\n        this._state.beforePatch();\n        [this.element, this.node] = this.patch(\n          this.element,\n          this.nodeFunc(this.state),\n          this.node,\n        );\n      }\n      this.patching = false;\n      this.updateCount = 0;\n    } else {\n      // state updated when patching\n      this.updated = true;\n      this.updateCount++;\n    }\n    return this.state;\n  }\n\n  html() {\n    return this.element.innerHTML;\n  }\n\n  get(...args) {\n    let path = args;\n    if (path.length == 1 && Array.isArray(path[0])) {\n      path = path[0];\n    }\n    let obj = this.state;\n    for (let i = 0; i < path.length; i++) {\n      obj = obj[path[i]];\n    }\n    return obj;\n  }\n\n  // patch lastElement to represent node attributes, with diffing lastNode\n  patch(lastElement, node, lastNode) {\n    // thunk\n    let lastThunk;\n    if (lastNode && lastNode instanceof Thunk) {\n      lastThunk = lastNode;\n      lastNode = lastThunk.node;\n    }\n    let thunk;\n    if (node instanceof Thunk) {\n      thunk = node;\n    }\n\n    if (thunk) {\n      let shouldUpdate = false;\n      if (!lastThunk) {\n        shouldUpdate = true;\n      } else if (thunk.name != lastThunk.name) {\n        shouldUpdate = true;\n      } else if (this._state.argsChanged(thunk.args, lastThunk.args)) {\n        shouldUpdate = true;\n      }\n\n      if (lastThunk && !shouldUpdate) {\n        // reuse node\n        thunk.node = lastThunk.node;\n        // reuse element\n        thunk.element = lastThunk.element;\n      }\n      node = thunk.getNode();\n    }\n\n    // Thunk.getNode may return another Thunk, patch recursively\n    if (node instanceof Thunk || lastNode instanceof Thunk) {\n      return this.patch(lastElement, node, lastNode);\n    }\n\n    // no need to patch if two Nodes is the same object\n    // if thunk's node is reuse, will return here\n    if (node === lastNode) {\n      return [lastElement, node];\n    }\n\n    // not patchable, build a new element\n    if (\n      // not diffable\n      (!lastNode)\n      // no element\n      || (!lastElement)\n      // different tag, no way to patch\n      || (node.tag != lastNode.tag)\n    ) {\n      const element = node.toElement(undefined, this);\n      // insert new then remove old\n      if (lastElement && lastElement.parentNode) {\n        lastElement.parentNode.insertBefore(element, lastElement);\n        lastElement.parentNode.removeChild(lastElement);\n      }\n      // cache lastElement\n      if (lastNode && lastElement.tagName) {\n        this.elementCache[lastElement.tagName.toLowerCase()].push([lastElement, lastNode]);\n      }\n\n      return [element, node];\n    }\n\n    // set element\n    node.element = lastElement;\n    if (thunk) {\n      thunk.element = lastElement;\n    }\n\n    return this.patchNode(lastElement, node, lastNode);\n  }\n\n  patchNode(lastElement, node, lastNode) {\n    // innerHTML\n    if (node.innerHTML != lastNode.innerHTML) {\n      lastElement.innerHTML = node.innerHTML;\n    }\n\n    // text\n    if (node.text != lastNode.text) {\n      lastElement.nodeValue = node.text;\n    }\n\n    // id\n    if (node.id != lastNode.id) {\n      lastElement.id = node.id;\n    }\n\n    // styles\n    const styleType = typeof node.style;\n    const lastStyleType = typeof lastNode.style;\n    // different type, no diff\n    if (styleType !== lastStyleType) {\n      lastElement.style = undefined;\n      if (styleType === 'string') {\n        lastElement.style = node.style;\n      } else if (styleType === 'object' && node.style !== null) {\n        for (const key in node.style) {\n          lastElement.style[key] = node.style[key];\n        }\n      }\n    } \n    // diff object\n    else if (styleType === 'object') {\n      if (node.style !== null) {\n        for (const key in node.style) {\n          if (!lastNode.style || node.style[key] != lastNode.style[key]) {\n            lastElement.style[key] = node.style[key];\n          }\n        }\n      }\n      if (lastNode.style !== null) {\n        for (const key in lastNode.style) {\n          if (!node.style || !(key in node.style)) {\n            lastElement.style[key] = '';\n          }\n        }\n      }\n    } \n    // string, compare\n    else if (styleType === 'string') {\n      if (node.style !== lastNode.style) {\n        lastElement.style = node.style;\n      }\n    }\n\n    // class\n    for (const key in node.classList) {\n      // should update\n      if (!lastNode.classList || node.classList[key] != lastNode.classList[key]) {\n        if (node.classList[key]) {\n          lastElement.classList.add(key);\n        } else {\n          lastElement.classList.remove(key);\n        }\n      }\n    }\n    for (const key in lastNode.classList) {\n      if (!node.classList || !(key in node.classList)) {\n        lastElement.classList.remove(key);\n      }\n    }\n\n    // attributes\n    for (const key in node.attributes) {\n      if (!lastNode.attributes || node.attributes[key] != lastNode.attributes[key]) {\n        const value = node.attributes[key];\n        const valueType = typeof value;\n        if (valueType == 'string' || valueType == 'number') {\n          lastElement.setAttribute(key, value);\n          lastElement[key] = value\n        } else if (valueType == 'boolean') {\n          if (value) {\n            lastElement.setAttribute(key, true);\n            lastElement[key] = true;\n          } else {\n            lastElement.removeAttribute(key);\n            lastElement[key] = false;\n          }\n        }\n      }\n    }\n    for (const key in lastNode.attributes) {\n      if (!node.attributes || !(key in node.attributes)) {\n        lastElement.removeAttribute(key);\n        lastElement[key] = undefined;\n      }\n    }\n\n    // events\n    const eventKeys = {};\n    for (const key in node.events) {\n      let k = elementSetEvent(lastElement, key, node.events[key].bind(node));\n      eventKeys[k] = true;\n    }\n    if (lastElement.__aff_events) {\n      for (const type in lastElement.__aff_events) {\n        for (const subtype in lastElement.__aff_events[type]) {\n          if (!(type + ':' + subtype in eventKeys)) {\n            delete lastElement.__aff_events[type][subtype];\n          }\n        }\n      }\n    }\n\n    // children\n    const childElements = lastElement.childNodes;\n    const childLen = node.children ? node.children.length : 0;\n    const lastChildLen = lastNode && lastNode.children ? lastNode.children.length : 0;\n    for (let i = 0; i < childLen; i++) {\n      const [elem, _] = this.patch(\n        childElements[i], \n        node.children[i], \n        lastNode && lastNode.children ? lastNode.children[i] : undefined,\n      );\n      if (!childElements[i]) {\n        lastElement.appendChild(elem);\n      }\n    }\n    for (let i = childLen; i < lastChildLen; i++) {\n      lastElement.removeChild(lastElement.childNodes[childLen]);\n    }\n\n    if (node.hooks && node.hooks.patched) {\n      node.hooks.patched.forEach(fn => fn(lastElement));\n    }\n\n    return [lastElement, node];\n  }\n}\n\nclass Thunk {\n  constructor() {\n    this.func = null;\n    this.args = null;\n    this.node = undefined;\n    this.element = null;\n    this.name = null;\n  }\n\n  toElement(_name, app) {\n    if (!this.element) {\n      const node = this.getNode();\n      if (!node || !node.toElement) {\n        this.element = warning(`RENDER ERROR: cannot render ${node}`).toElement();\n        console.warn('cannot render', node);\n      } else {\n        this.element = node.toElement(this.name, app);\n      }\n    }\n    return this.element;\n  }\n\n  getNode() {\n    if (!this.node) {\n      beforeThunkCallFunc(this);\n      this.node = this.func.apply(this, this.args);\n      afterThunkCallFunc(this);\n      if (this.node === null) {\n        this.node = e('div', { style: { display: 'none' }});\n      }\n      if (!this.node) {\n        throw['constructor of ' + (this.name || 'anonymous') + ' returned undefined value', this];\n      }\n    }\n    return this.node;\n  }\n\n}\n\n// thunk helper\nexport function t(...args) {\n  if (args.length == 0) {\n    throw['no arguments to t()'];\n  }\n  const thunk = new Thunk();\n  switch (typeof args[0]) {\n  case 'string': // named thunk\n    thunk.name = args[0];\n    thunk.func = args[1];\n    thunk.args = args.slice(2);\n    break\n  case 'function':\n    thunk.func = args[0];\n    thunk.args = args.slice(1);\n    thunk.name = thunk.func.name;\n    break\n  }\n  if (!thunk.func) {\n    throw['invalid thunk func', thunk.func];\n  }\n  return thunk\n}\n\n// element helper\nexport function e(tag, ...args) {\n  if (typeof tag !== 'string') {\n    throw['bad tag name', tag];\n  }\n  const node = new Node();\n  node.tag = tag;\n  _e(node, ...args);\n  return node;\n}\n\nexport const skip = { skipFollowingArguments: true };\n\nfunction _e(node, ...args) {\n  for (let i = 0; i < args.length; i++) {\n    const arg = args[i];\n    if (arg instanceof Node || arg instanceof Thunk) {\n      node.setChildren(arg);\n    } else if (arg instanceof Selector) {\n      node.setSelector(arg.str);\n    } else if (arg instanceof Css) {\n      node.setProperties({\n        style: arg.str,\n      });\n    } else if (arg instanceof Events) {\n      for (let idx = 0; idx < arg.events.length; idx++) {\n        const ev = arg.events[idx];\n        node.setProperties({\n          ['on' + ev.type]: ev.fn,\n        });\n      }\n    } else if (arg === skip) {\n      break\n    } else if (typeof arg === 'object' && arg !== null) {\n      if (Array.isArray(arg)) {\n        // flatten\n        _e(node, ...arg);\n      } else {\n        node.setProperties(arg);\n      }\n    } else if (typeof arg === 'function') {\n      _e(node, arg());\n    } else {\n      node.setChildren(arg);\n    }\n  }\n  return node;\n}\n\nlet beforeThunkCallFunc = (thunk) => {};\nlet afterThunkCallFunc = (thunk) => {};\nexport const setBeforeThunkCallFunc = (fn) => {\n  beforeThunkCallFunc = fn;\n}\nexport const setAfterThunkCallFunc = (fn) => {\n  afterThunkCallFunc = fn;\n}\n\nclass Node {\n  constructor() {\n    this.tag = null;\n    this.id = null;\n    this.style = null;\n    this.classList = null;\n    this.children = null;\n    this.attributes = null;\n    this.events = null;\n    this.text = null;\n    this.innerHTML = null;\n    this.element = null;\n    this.hooks = null;\n  }\n\n  setSelector(selector) {\n    const parts = selector.match(/[.#][A-Za-z][A-Za-z0-9_:-]*/g);\n    if (parts) {\n      for (let i = 0, l = parts.length; i < l; i++) {\n        const part = parts[i];\n        if (part.charAt(0) == '#') {\n          this.id = part.substring(1);\n        } else if (part.charAt(0) == '.') {\n          this.classList = this.classList || {};\n          this.classList[part.substring(1)] = true;\n        }\n      }\n    }\n  }\n\n  setProperties(properties) {\n    for (const key in properties) {\n      if (key == 'id' || key == 'innerHTML') {\n        // id, innerHTML\n        this[key] = properties[key];\n      } else if (key == 'classList') {\n        this.classList = this.classList || {};\n        const property = properties.classList;\n        if (typeof property == 'string') {\n          const parts = property.match(/[A-Za-z][A-Za-z0-9_:-]*/g);\n          if (parts) {\n            for (let i = 0, l = parts.length; i < l; i++) {\n              const part = parts[i];\n              this.classList[part] = true;\n            }\n          }\n        } else if (typeof property == 'object' && property !== null) {\n          if (Array.isArray(property)) {\n            for (let i = 0; i < property.length; i++) {\n              this.classList[property[i]] = true;\n            }\n          } else {\n            for (const k in property) {\n              this.classList[k] = property[k];\n            }\n          }\n        } else {\n          throw['bad class', property];\n        }\n      } else if (key == 'style') {\n        // styles\n        if (this.style === null) {\n          this.style = properties.style;\n        } else {\n          const style = properties.style;\n          const styleType = typeof style;\n          const currentType = typeof this.style;\n          if (styleType != currentType) {\n            throw['should not mix-use object-like style and string-like style', style, this.style];\n          }\n          if (styleType === 'string') {\n            this.style += style;\n          } else if (styleType === 'object') {\n            for (const key in style) {\n              this.style[key] = style[key];\n            }\n          }\n        }\n      } else if (/^on/.test(key) && typeof properties[key] === 'function') {\n        if (key == 'oncreated' || key == 'oncreate') {\n          this.hooks = this.hooks || {};\n          this.hooks.created = this.hooks.created || [];\n          this.hooks.created.push(properties[key]);\n        } else if (key == 'onpatch' || key == 'onpatched') {\n          this.hooks = this.hooks || {};\n          this.hooks.patched = this.hooks.patched || [];\n          this.hooks.patched.push(properties[key]);\n        } else {\n          // events\n          this.events = this.events || {};\n          this.events[key] = properties[key];\n        }\n      } else {\n        this.attributes = this.attributes || {};\n        this.attributes[key] = properties[key];\n      }\n    }\n  }\n\n  setChildren(children) {\n    this.children = this.children || [];\n    const type = typeof children;\n    if (type === 'object' && children !== null) {\n      this.children.push(children);\n    } else if (type === 'boolean' || type === 'number' || type === 'string' || type === 'symbol') {\n      const child = new Node();\n      child.text = children.toString();\n      this.children.push(child);\n    } else {\n      throw['bad child', children];\n    }\n  }\n\n  toElement(name, app) {\n    let element;\n    if (this.text !== null) {\n      element = document.createTextNode(this.text);\n    } else {\n      // use cached element\n      if (app && app.elementCache[this.tag] && app.elementCache[this.tag].length > 0) {\n        let [element, lastNode] = app.elementCache[this.tag].pop();\n        let node;\n        [element, node] = app.patchNode(element, this, lastNode);\n        this.element = element;\n        if (this.hooks && this.hooks.created) {\n          this.hooks.created.forEach(fn => fn(element));\n        }\n        return element;\n      }\n      element = document.createElement(this.tag);\n    }\n    if (this.innerHTML !== null) {\n      element.innerHTML = this.innerHTML;\n    }\n    if (this.id !== null) {\n      element.id = this.id;\n    }\n    if (this.style !== null) {\n      if (typeof this.style == 'object' && this.style !== null) {\n        for (const key in this.style) {\n          element.style[key] = this.style[key];\n        }\n      } else {\n        element.style = this.style;\n      }\n    }\n    if (this.classList !== null) {\n      let className = '';\n      for (let k in this.classList) {\n        if (this.classList[k]) {\n          className = className + k + ' ';\n        }\n      }\n      element.className = className.trim();\n    }\n    if (this.children !== null) {\n      const childFragment = document.createDocumentFragment();\n      for (let i = 0, l = this.children.length; i < l; i++) {\n        childFragment.appendChild(this.children[i].toElement(undefined, app));\n      }\n      element.appendChild(childFragment);\n    }\n    if (this.attributes !== null) {\n      for (const key in this.attributes) {\n        const value = this.attributes[key];\n        const valueType = typeof value;\n        if (valueType == 'string' || valueType == 'number') {\n          element.setAttribute(key, value);\n          element[key] = value;\n        } else if (valueType == 'boolean') {\n          if (value) {\n            element.setAttribute(key, true);\n            element[key] = true;\n          } else {\n            element.removeAttribute(key);\n            element[key] = false;\n          }\n        }\n      }\n    }\n    if (this.events !== null) {\n      for (const key in this.events) {\n        // set event callback, bind current Node to callback\n        // constructor must not be arrow function to get proper 'this'\n        elementSetEvent(element, key, this.events[key].bind(this));\n      }\n    }\n    this.element = element;\n    if (this.hooks && this.hooks.created) {\n      this.hooks.created.forEach(fn => fn(element));\n    }\n    return element;\n  }\n\n}\n\nconst warning = (text) => e('div', {\n  style: {\n    backgroundColor: 'yellow',\n    color: 'red',\n    fontWeight: 'bold',\n  },\n}, text);\n\nfunction elementSetEvent(element, type, fn) {\n  let events = element.__aff_events;\n  if (!events) {\n    events = {};\n    element.__aff_events = events;\n  }\n  const parts = type.split(/[$:]/);\n  type = parts[0];\n  const subtype = parts.slice(1).join(':') || '__default';\n  if (!(type in events)) {\n    events[type] = {};\n    element.addEventListener(type.substr(2), function(ev) {\n      let ret;\n      for (const subtype in events[type]) {\n        ret = events[type][subtype](ev);\n      }\n      return ret;\n    });\n  }\n  events[type][subtype] = fn;\n  return type + ':' + subtype;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app.js","export const allTags = [\n\n  // html\n  'a', 'abbr', 'acronym', 'address', 'applet', 'area', 'article', 'aside', 'audio',\n  'b', 'base', 'basefont', 'bdi', 'bdo', 'bgsound', 'big', 'blink', 'blockquote', 'body', 'br', 'button',\n  'canvas', 'caption', 'center', 'cite', 'code', 'col', 'colgroup', 'command', 'content',\n  'data', 'datalist', 'dd', 'del', 'details', 'dfn', 'dialog', 'dir', 'div', 'dl', 'dt',\n  'element', 'em', 'embed',\n  'fieldset', 'figcaption', 'figure', 'font', 'footer', 'form', 'frame', 'frameset',\n  'head', 'header', 'hgroup', 'hr', 'html',\n  'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'h7',\n  'i', 'iframe', 'image', 'img', 'input', 'ins', 'isindex',\n  'kbd', 'keygen',\n  'label', 'legend', 'li', 'link', 'listing',\n  'main', 'map', 'mark', 'marquee', 'menu', 'menuitem', 'meta', 'meter', 'multicol',\n  'nav', 'nobr', 'noembed', 'noframes', 'noscript',\n  'object', 'ol', 'optgroup', 'option', 'output',\n  'p', 'param', 'picture', 'plaintext', 'pre', 'progress',\n  'q',\n  'rp', 'rt', 'rtc', 'ruby',\n  's', 'samp', 'script', 'section', 'select', 'shadow', 'small', 'source', 'spacer', 'span', 'strike', 'strong', 'style', 'sub', 'summary', 'sup',\n  'table', 'tbody', 'td', 'template', 'textarea', 'tfoot', 'th', 'thead', 'time', 'title', 'tr', 'track', 'tt',\n  'u', 'ul',\n  'var', 'video',\n  'wbr',\n  'xmp',\n\n  // svg\n  'a', 'altGlyph', 'altGlyphDef', 'altGlyphItem', 'animate', 'animateColor', 'animateMotion', 'animateTransform', 'audio',\n  'canvas', 'circle', 'clipPath', 'color-profile', 'cursor',\n  'defs', 'desc', 'discard',\n  'ellipse',\n  'feBlend', 'feColorMatrix', 'feComponentTransfer', 'feComposite', 'feConvolveMatrix', 'feDiffuseLighting', 'feDisplacementMap', 'feDistantLight',\n  'feDropShadow', 'feFlood', 'feFuncA', 'feFuncB', 'feFuncG', 'feFuncR', 'feGaussianBlur', 'feImage', 'feMerge', 'feMergeNode', 'feMorphology',\n  'feOffset', 'fePointLight', 'feSpecularLighting', 'feSpotLight', 'feTile', 'feTurbulence', 'filter',\n  'font', 'font-face', 'font-face-format', 'font-face-name', 'font-face-src', 'font-face-uri', 'foreignObject',\n  'g', 'glyph', 'glyphRef',\n  'hatch', 'hatchpath', 'hkern',\n  'iframe', 'image',\n  'line', 'linearGradient',\n  'marker', 'mask', 'mesh', 'meshgradient', 'meshpatch', 'meshrow', 'metadata', 'missing-glyph', 'mpath',\n  'path', 'pattern', 'polygon', 'polyline',\n  'radialGradient', 'rect',\n  'script', 'set', 'solidcolor', 'stop', 'style', 'svg', 'switch', 'symbol',\n  'text', 'textPath', 'title', 'tref', 'tspan',\n  'unknown', 'use',\n  'video', 'view', 'vkern',\n\n];\n\n\n\n// WEBPACK FOOTER //\n// ./all_tags.js","export function Selector(str) {\n  this.str = str;\n}\n\nexport function Css(str) {\n  this.str = str;\n}\n\nfunction makeTagger(constructor) {\n  function tag(strings, ...values) {\n    let str = '';\n    for (let i = 0; i < strings.length; i++) {\n      str += strings[i];\n      if (values[i] !== undefined) {\n        str += values[i];\n      }\n    }\n    return new constructor(str);\n  }\n  return tag;\n}\n\nexport const $ = makeTagger(Selector);\nexport const css = makeTagger(Css);\n\n\n\n// WEBPACK FOOTER //\n// ./tagged.js","class Event {\n  constructor(type, fn) {\n    this.type = type;\n    this.fn = fn;\n  }\n}\n\nexport class Events {\n  constructor() {\n    this.events = [];\n  }\n\n  on(type, fn) {\n    this.events.push(new Event(type, fn));\n    return this;\n  }\n}\n\nexport function on(type, fn) {\n  const events = new Events();\n  events.on(type, fn);\n  return events;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./event.js","import { State } from './state'\n\nexport class MutableState extends State {\n  constructor(initState, app) {\n    super();\n    this.app = app;\n    this.patchTick = 1;\n    this.state = initState;\n    this.setupState(this.state, [], false);\n  }\n\n  get() {\n    return this.state;\n  }\n\n  update(...arg) {\n    this.state = this.updateState([], this.state, ...arg);\n  }\n\n  updateState(basePath, obj, ...args) {\n    if (args.length === 0) {\n      return obj;\n    } else if (args.length === 1) {\n      let ret;\n      if (typeof args[0] === 'object' && args[0] !== null && args[0].__is_op) {\n        ret = args[0].apply(obj, this);\n        if (ret === obj) {\n          this.setupPatchTick(ret);\n        }\n      } else {\n        ret = args[0];\n      }\n      let forceSetup = false;\n      if (Array.isArray(obj) && Array.isArray(ret)) {\n        // re-setup arrays conservatively\n        forceSetup = true;\n      }\n      this.setupState(ret, basePath, forceSetup);\n      return ret;\n    } else {\n      if (!obj) {\n        obj = {};\n      }\n      if (typeof obj === 'object' && obj !== null) {\n        if (!obj.hasOwnProperty('__aff_tick')) {\n          this.setupPatchTick(obj);\n        }\n        const key = args[0];\n        const keyType = typeof key;\n        for (const k in obj) {\n          if ((keyType === 'number' || keyType === 'string') && k == key) {\n            let path = basePath.slice(0);\n            path.push(k);\n            obj[k] = this.updateState(path, obj[k], ...args.slice(1));\n          } else if (keyType === 'function' && key(k)) {\n            let path = basePath.slice(0);\n            path.push(k);\n            obj[k] = this.updateState(path, obj[k], ...args.slice(1));\n          }\n        }\n        if ((keyType === 'string' || keyType === 'number') && !(key in obj)) {\n          let path = basePath.slice(0);\n          path.push(key);\n          obj[key] = this.updateState(path, undefined, ...args.slice(1));\n        }\n        obj.__aff_tick = this.patchTick + 1;\n        return obj;\n      } else {\n        throw['bad update path', obj, args];\n      }\n    }\n  }\n\n  beforePatch() {\n    this.patchTick++;\n  }\n\n  setupPatchTick(obj) {\n    if (obj.hasOwnProperty('__aff_tick')) {\n      obj.__aff_tick = this.patchTick + 1;\n    } else {\n      Object.defineProperty(obj, '__aff_tick', {\n        configurable: false,\n        enumerable: false,\n        writable: true,\n        value: this.patchTick + 1,\n      });\n    }\n  }\n\n  argsChanged(arg, lastArg) {\n    const argType = typeof arg;\n\n    // different type\n    if (argType !== typeof lastArg) {\n      return true;\n    }\n\n    // trigger update of used keys\n    if (\n      arg === lastArg\n      && typeof arg === 'object'\n      && arg != null\n      && arg.__aff_use_keys\n      && arg.__aff_tick_update_at != this.patchTick\n    ) {\n      for (const key in arg.__aff_use_keys) {\n        const fromPath = arg.__aff_use_keys[key].slice(0);\n        fromPath.pop();\n        const tick = this.app.get(fromPath).__aff_tick;\n        if (tick == this.patchTick) {\n          arg.__aff_tick = tick;\n        }\n      }\n      arg.__aff_tick_update_at = this.patchTick;\n    }\n\n    // patchTick\n    if (\n      arg === lastArg \n      && typeof arg === 'object' \n      && arg !== null \n      && arg.__aff_tick === this.patchTick\n    ) {\n      return true;\n    }\n\n    // array\n    else if (Array.isArray(arg) && Array.isArray(lastArg)) {\n      // different length\n      if (arg.length != lastArg.length) {\n        return true;\n      }\n      // check items\n      for (let i = 0; i < arg.length; i++ ){\n        if (this.argsChanged(arg[i], lastArg[i])) {\n          return true;\n        }\n      }\n    } \n\n    // deep compare object\n    else if (argType === 'object') {\n      // different keys length\n      if (Object.keys(arg).length != Object.keys(lastArg).length) {\n        return true;\n      }\n      for (const key in arg) {\n        if (this.argsChanged(arg[key], lastArg[key])) {\n          return true;\n        }\n      }\n    }\n\n    // function\n    else if (argType === 'function') {\n      if (arg.name !== lastArg.name) {\n        return true;\n      }\n    }\n\n    // compare\n    else if (arg !== lastArg) {\n      return true;\n    }\n\n    return false;\n  }\n\n  setupState(state, basePath ,forceSetup) {\n    if (typeof state != 'object' || state === null) {\n      return\n    }\n    if (state.__aff_read_only) {\n      return\n    }\n\n    if (!state.hasOwnProperty('$update') || forceSetup) {\n      // set\n      const app = this.app;\n      Object.defineProperty(state, '$update', {\n        configurable: false,\n        enumerable: false,\n        writable: true,\n        value: function(...args) {\n          app.update(...this.$path, ...args);\n          return app.get(this.$path);\n        },\n      });\n      Object.defineProperty(state, '$path', {\n        configurable: false,\n        enumerable: false,\n        writable: true,\n        value: basePath.slice(0),\n      });\n\n    } else {\n      if (!(state.$path.reduce((acc, cur, i) => \n        acc && cur == basePath[i], true))) {\n        throw['cannot change state object path', basePath.slice(0), state.$path];\n      }\n    }\n\n    // recursively\n    for (let key in state) {\n      let subPath = basePath.slice(0);\n      subPath.push(key);\n      this.setupState(state[key], subPath, forceSetup);\n    }\n\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./mutable_state.js","export class State {\n  get() {}\n  update() {}\n  beforePatch() {}\n  argsChanged() {}\n}\n\nexport function readOnly(obj) {\n  if (typeof obj !== 'object' || obj === null) {\n    return obj;\n  }\n  Object.defineProperty(obj, '__aff_read_only', {\n    configurable: false,\n    enumerable: false,\n    writable: false,\n    value: true,\n  });\n  return obj;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./state.js","// operations \n\nlet $func = (fn) => ({\n  __is_op: true,\n  op: 'func',\n  args: [fn],\n  apply(obj) {\n    return fn(obj);\n  },\n});\n\nlet $delete = (prop) => ({\n  __is_op: true,\n  op: 'delete',\n  args: [prop],\n  apply(obj) {\n    delete obj[prop];\n    return obj;\n  },\n});\n\nlet $del = $delete;\n\n// numbers\n\nlet $inc = {\n  __is_op: true,\n  op: 'inc',\n  apply(obj) {\n    return (obj || 0) + 1;\n  },\n};\n\nlet $dec = {\n  __is_op: true,\n  op: 'dec',\n  apply(obj) {\n    return obj - 1;\n  }\n};\n\n// arrays\n\nlet arrayOps = {};\n\n[\n  ['push', Array.prototype.push],\n  ['unshift', Array.prototype.unshift],\n  ['splice', Array.prototype.splice],\n  ['fill', Array.prototype.fill],\n  ['sort', Array.prototype.sort],\n].forEach(info => {\n  arrayOps['$' + info[0]] = ((name, method) => {\n    return function(...args) {\n      return {\n        __is_op: true,\n        op: name,\n        args: args,\n        apply(obj) {\n          method.apply(obj, args);\n          return obj;\n        },\n      };\n    };\n  })(...info);\n});\n\n[\n  ['filter', Array.prototype.filter],\n  ['map', Array.prototype.map],\n].forEach(info => {\n  arrayOps['$' + info[0]] = ((name, method) => {\n    return function(...args) {\n      return {\n        __is_op: true,\n        op: name,\n        args: args,\n        apply(obj) {\n          return method.apply(obj, args);\n        },\n      };\n    };\n  })(...info);\n});\n\n[\n  ['pop', Array.prototype.pop],\n  ['shift', Array.prototype.shift],\n  ['reverse', Array.prototype.reverse],\n].forEach(info => {\n  arrayOps['$' + info[0]] = ((name, method) => {\n    return {\n      __is_op: true,\n      op: name,\n      apply(obj) {\n        method.apply(obj);\n        return obj;\n      },\n    };\n  })(...info);\n});\n\n// objects\n\nfunction $merge(spec) {\n  return {\n    __is_op: true,\n    op: 'merge',\n    args: [spec],\n    apply(obj) {\n      return _merge(obj, spec);\n    },\n  };\n}\n\nfunction _merge(obj, spec) {\n  if (typeof spec === 'object' && spec !== null) {\n    if (spec.__is_op) {\n      return spec.apply(obj);\n    }\n    if (typeof obj !== 'object' || obj === null) {\n      obj = {};\n    }\n    for (const key in spec) {\n      obj[key] = _merge(obj[key], spec[key]);\n    }\n  } else {\n    return spec;\n  }\n  return obj;\n}\n\n// predictions\n\nfunction $any(k) {\n  return true;\n}\n\n// export\n\nmodule.exports = {\n  $func,\n  $delete,\n  $del,\n  $inc,\n  $dec,\n  ...arrayOps,\n  $merge,\n  $any,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./operations.js","import {e} from './app'\nimport { allTags } from './all_tags'\n\nconst helpers = allTags.reduce((helpers, tag) => {\n  helpers[tag] = function(...args) {\n    return e(tag, ...args);\n  };\n  helpers[tag.charAt(0).toUpperCase() + tag.slice(1)] = helpers[tag];\n  helpers[tag.toUpperCase()] = helpers[tag];\n  return helpers;\n}, {});\n\nconst checkbox = (...args) => e('input', {\n  type: 'checkbox',\n}, ...args);\n\nmodule.exports = {\n  ...helpers,\n\n  none: e('div', {\n    style: {\n      display: 'none',\n    },\n  }),\n\n  clear: e('div', {\n    style: {\n      clear: 'both',\n    },\n  }),\n\n  checkbox: checkbox,\n  Checkbox: checkbox,\n  CHECKBOX: checkbox,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./tags.js","import { on } from './event'\n\nexport function bindFocus(state, name) {\n  let path = state.$path.slice(0);\n  path.push(name);\n  path = path.join(':');\n  return {\n    ['onfocus$' + path]: function() {\n      state.$update(name, true);\n    },\n    ['onblur$' + path]: function() {\n      state.$update(name, false);\n    },\n  };\n}\n\nexport function bindEnter(state, name) {\n  let path = state.$path.slice(0);\n  path.push(name);\n  path = path.join(':');\n  return {\n    ['onmouseenter$' + path]: function() {\n      state.$update(name, true);\n    },\n    ['onmouseleave$' + path]: function() {\n      state.$update(name, false);\n    },\n  };\n}\n\nexport function bindOver(state, name) {\n  let path = state.$path.slice(0);\n  path.push(name);\n  path = path.join(':');\n  return {\n    ['onmouseover$' + path]: function() {\n      state.$update(name, true);\n    },\n    ['onmouseout$' + path]: function() {\n      state.$update(name, false);\n    },\n  };\n}\n\nexport let bindHover = bindOver;\n\n\n\n// WEBPACK FOOTER //\n// ./bind.js","import { $any } from './operations'\nimport { on } from './event'\n\nexport const logUpdates = on('afterUpdate:__log_updates', (state, ...args) => {\n  console.log('%cUPDATE', 'background: #555; color: white', \n    args.slice(0, -1).map(arg => formatUpdatePath(arg)).join(' . ') + ' => ',\n    formatUpdateArg(args[args.length - 1]),\n  );\n});\n\nfunction formatUpdatePath(arg) {\n  if (arg === $any) {\n    return '$any';\n  } \n  return arg;\n}\n\nfunction formatUpdateArg(arg) {\n  if (typeof arg === 'object' && arg.__is_op) {\n    return [arg.op, ...(arg.args || [])];\n  }\n  return arg;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./debug.js"],"sourceRoot":""}